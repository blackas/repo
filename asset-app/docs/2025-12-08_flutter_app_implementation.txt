================================================================================
Flutter ì•± êµ¬í˜„ ê³„íš (Asset Folio Mobile)
================================================================================
ì‘ì„±ì¼: 2025-12-08
í”„ë¡œì íŠ¸: asset_folio_mobile (Flutter)
ëª©ì : iOS/Android í¬ë¡œìŠ¤ í”Œë«í¼ ìì‚° ê´€ë¦¬ ëª¨ë°”ì¼ ì•± ê°œë°œ
ë²„ì „: 3.3 (4ì°¨ ë¦¬ë·° í”¼ë“œë°± ìµœì¢… ë°˜ì˜ - ëª¨ë“  Critical ì´ìŠˆ ìˆ˜ì • ì™„ë£Œ)

ì‘ì—… ê³„íš ìƒì„¸ ìˆ˜ì¤€: detailed
detail_level = detailed

ë³€ê²½ ì´ë ¥:
- v1.0: ì´ˆê¸° ì‘ì„±
- v2.0: 1ì°¨ ë¦¬ë·° í”¼ë“œë°± 10ê°œ ì´ìŠˆ ìˆ˜ì •
- v3.0: 2ì°¨ ë¦¬ë·° - iOS ATS, router conflict, search API, endpoints (4ê°œ critical ì´ìŠˆ)
- v3.1: 3ì°¨ ë¦¬ë·° - detail level, dart:async import, asset type conversion, iOS target (4ê°œ blocking ì´ìŠˆ)
- v3.2: 4ì°¨ ë¦¬ë·° - unreachable code in _getDeviceId() ìˆ˜ì • (1ê°œ critical ì´ìŠˆ)
- v3.3: í˜„ì¬ ë²„ì „ - detail levelì„ extremeâ†’detailedë¡œ ì¡°ì • (ì´ 19ê°œ ì´ìŠˆ ìˆ˜ì • ì™„ë£Œ)

ğŸš€ QUICK START (ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ê¸°):
1. cd /Users/indent/Desktop/Noah/repo/
2. flutter create asset_folio_mobile --org com.assetfolio --platforms=ios,android
3. cd asset_folio_mobile
4. code . (VS Codeë¡œ ì—´ê¸°)
5. ì´ ë¬¸ì„œì˜ Phase 0ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì§„í–‰

================================================================================
1. í”„ë¡œì íŠ¸ ê°œìš”
================================================================================

1.1 í˜„ì¬ ìƒíƒœ
-------------
- Backend: FastAPI + Django (OAuth 2.0 ì¸ì¦ êµ¬í˜„ ì™„ë£Œ)
  - ìœ„ì¹˜: /Users/indent/Desktop/Noah/repo/asset-backend
  - API Docs: http://localhost:8001/api/docs
  - ë°±ì—”ë“œ OAuth 2.0 í‘œì¤€ ì¤€ìˆ˜ (RFC 6749)

- Frontend: React + TypeScript (ì›¹ ë²„ì „ êµ¬í˜„ ì™„ë£Œ)
  - ìœ„ì¹˜: /Users/indent/Desktop/Noah/repo/asset-frontend
  - OAuth 2.0 token ê¸°ë°˜ ì¸ì¦ ì‚¬ìš©

- Mobile: ë¯¸êµ¬í˜„

1.2 ëª©í‘œ
--------
- Flutterë¥¼ ì‚¬ìš©í•œ iOS/Android í¬ë¡œìŠ¤ í”Œë«í¼ ì•± ê°œë°œ
- ë°±ì—”ë“œ OAuth 2.0 APIì™€ ì™„ì „ í†µí•©:
  - ë™ì¼í•œ /auth/token ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©
  - ë™ì¼í•œ JWT í† í° í˜•ì‹ ì‚¬ìš©
  - device_type='ios' ë˜ëŠ” 'android'ë¡œ êµ¬ë¶„
- ì›¹ í”„ë¡ íŠ¸ì—”ë“œì™€ ë™ì¼í•œ ê¸°ëŠ¥ ì œê³µ
- ë„¤ì´í‹°ë¸Œ ì•± ìˆ˜ì¤€ì˜ UX ì œê³µ

1.3 ì•± ì£¼ìš” ê¸°ëŠ¥
---------------
Phase 1 (MVP):
- ì‚¬ìš©ì ì¸ì¦ (íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ)
- ìì‚° ëª©ë¡ ì¡°íšŒ (í•œêµ­ ì£¼ì‹, ë¯¸êµ­ ì£¼ì‹, ì•”í˜¸í™”í)
- ìì‚° ìƒì„¸ ì •ë³´ ì¡°íšŒ
- ìì‚° ê²€ìƒ‰

Phase 2 (ì¶”í›„ êµ¬í˜„):
- ê´€ì‹¬ ëª©ë¡ (Watchlist)
- ë¦¬í¬íŠ¸ ì¡°íšŒ
- í‘¸ì‹œ ì•Œë¦¼

================================================================================
2. ê¸°ìˆ  ìŠ¤íƒ
================================================================================

2.1 í•µì‹¬ í”„ë ˆì„ì›Œí¬
------------------
- Flutter 3.24.0 (ì •í™•í•œ ë²„ì „ ëª…ì‹œ)
- Dart 3.5.0

2.2 ì£¼ìš” íŒ¨í‚¤ì§€
--------------

ìƒíƒœ ê´€ë¦¬:
- riverpod: ^2.5.1
- flutter_riverpod: ^2.5.1

ë„¤íŠ¸ì›Œí‚¹:
- dio: ^5.4.0
- json_annotation: ^4.8.1
- json_serializable: ^6.7.1

ë³´ì•ˆ ì €ì¥ì†Œ:
- flutter_secure_storage: ^9.0.0

ë¼ìš°íŒ…:
- go_router: ^14.0.0

í™˜ê²½ë³€ìˆ˜:
- flutter_dotenv: ^5.1.0

ë””ë°”ì´ìŠ¤ ì •ë³´:
- device_info_plus: ^10.0.0

UI ì»´í¬ë„ŒíŠ¸:
- google_fonts: ^6.1.0
- flutter_svg: ^2.0.9
- shimmer: ^3.0.0

ìœ í‹¸ë¦¬í‹°:
- intl: ^0.19.0
- logger: ^2.0.2

ë„¤íŠ¸ì›Œí¬ ìƒíƒœ:
- connectivity_plus: ^6.0.0

ê°œë°œ ë„êµ¬:
- build_runner: ^2.4.7
- flutter_lints: ^4.0.0

================================================================================
3. í”„ë¡œì íŠ¸ êµ¬ì¡°
================================================================================

asset_folio_mobile/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                      # ì•± ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ app.dart                   # App ìœ„ì ¯ (MaterialApp)
â”‚   â”‚   â”œâ”€â”€ router.dart                # GoRouter ì„¤ì •
â”‚   â”‚   â””â”€â”€ theme.dart                 # ì•± í…Œë§ˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ env_config.dart        # í™˜ê²½ë³€ìˆ˜ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”‚   â”œâ”€â”€ api_constants.dart     # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ app_constants.dart     # ì•± ìƒìˆ˜
â”‚   â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”‚   â”œâ”€â”€ dio_client.dart        # Dio ì„¤ì • ë° interceptor
â”‚   â”‚   â”‚   â”œâ”€â”€ api_response.dart      # ê³µí†µ API ì‘ë‹µ
â”‚   â”‚   â”‚   â”œâ”€â”€ network_exception.dart # ë„¤íŠ¸ì›Œí¬ ì˜ˆì™¸
â”‚   â”‚   â”‚   â””â”€â”€ error_handler.dart     # ì—ëŸ¬ ë©”ì‹œì§€ ë³€í™˜
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â””â”€â”€ secure_storage.dart    # í† í° ì €ì¥ì†Œ
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â””â”€â”€ core_providers.dart    # ê¸°ë³¸ Providerë“¤
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ logger.dart            # ë¡œê¹…
â”‚   â”‚       â””â”€â”€ formatters.dart        # ìˆ«ì í¬ë§·
â”‚   â”‚
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login_request.dart
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ token_response.dart
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.dart
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register_request.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ auth_repository.dart
â”‚   â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚   â”‚       â”œâ”€â”€ providers/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ auth_provider.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ screens/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ splash_screen.dart
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ register_screen.dart
â”‚   â”‚   â”‚       â””â”€â”€ widgets/
â”‚   â”‚   â”‚           â”œâ”€â”€ login_form.dart
â”‚   â”‚   â”‚           â””â”€â”€ register_form.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ asset.dart
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ asset_detail.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ asset_repository.dart
â”‚   â”‚   â”‚   â””â”€â”€ presentation/
â”‚   â”‚   â”‚       â”œâ”€â”€ providers/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ asset_provider.dart
â”‚   â”‚   â”‚       â”œâ”€â”€ screens/
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ asset_list_screen.dart
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ asset_detail_screen.dart
â”‚   â”‚   â”‚       â””â”€â”€ widgets/
â”‚   â”‚   â”‚           â”œâ”€â”€ asset_card.dart
â”‚   â”‚   â”‚           â””â”€â”€ asset_type_tabs.dart
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ search/
â”‚   â”‚       â”œâ”€â”€ data/
â”‚   â”‚       â”‚   â””â”€â”€ repositories/
â”‚   â”‚       â”‚       â””â”€â”€ search_repository.dart
â”‚   â”‚       â””â”€â”€ presentation/
â”‚   â”‚           â”œâ”€â”€ providers/
â”‚   â”‚           â”‚   â””â”€â”€ search_provider.dart
â”‚   â”‚           â”œâ”€â”€ screens/
â”‚   â”‚           â”‚   â””â”€â”€ search_screen.dart
â”‚   â”‚           â””â”€â”€ widgets/
â”‚   â”‚               â””â”€â”€ search_result_item.dart
â”‚   â”‚
â”‚   â””â”€â”€ shared/
â”‚       â”œâ”€â”€ widgets/
â”‚       â”‚   â”œâ”€â”€ custom_app_bar.dart
â”‚       â”‚   â”œâ”€â”€ loading_indicator.dart
â”‚       â”‚   â”œâ”€â”€ error_widget.dart
â”‚       â”‚   â””â”€â”€ empty_state.dart
â”‚       â””â”€â”€ extensions/
â”‚           â”œâ”€â”€ context_extension.dart
â”‚           â””â”€â”€ string_extension.dart
â”‚
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ backend_integration_test.dart  # ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ auth_repository_test.dart
â”‚   â”‚   â””â”€â”€ asset_repository_test.dart
â”‚   â”œâ”€â”€ widget/
â”‚   â”‚   â””â”€â”€ login_screen_test.dart
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ auth_flow_test.dart
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ pubspec.yaml
â”œâ”€â”€ analysis_options.yaml
â”œâ”€â”€ android/
â”‚   â””â”€â”€ app/
â”‚       â””â”€â”€ proguard-rules.pro        # ProGuard ê·œì¹™
â”œâ”€â”€ ios/
â”‚   â””â”€â”€ Runner/
â”‚       â””â”€â”€ Info.plist                # Keychain ê¶Œí•œ
â””â”€â”€ README.md

================================================================================
4. ìƒì„¸ êµ¬í˜„ ê³„íš
================================================================================

4.0 Phase 0: ì‚¬ì „ ì¤€ë¹„ ë° í™˜ê²½ ê²€ì¦ (í•„ìˆ˜!)
==========================================

ì˜ˆìƒ ì‹œê°„: 30ë¶„

ì‘ì—… ë‚´ìš©:
----------

1. Flutter ì„¤ì¹˜ í™•ì¸
   ```bash
   flutter --version
   # ì¶œë ¥ ì˜ˆì‹œ: Flutter 3.24.0 â€¢ Dart 3.5.0
   # 3.24.0 ì´ìƒì´ì–´ì•¼ í•¨
   ```

2. ë°±ì—”ë“œ ì„œë²„ í™•ì¸
   ```bash
   cd /Users/indent/Desktop/Noah/repo/asset-backend

   # ë°±ì—”ë“œ ì„œë²„ ì‹œì‘ (ì´ë¯¸ ì‹¤í–‰ ì¤‘ì´ë©´ ìƒëµ)
   uvicorn main:app --reload --port 8001

   # ë³„ë„ í„°ë¯¸ë„ì—ì„œ Health Check
   curl http://localhost:8001/health
   # ì˜ˆìƒ ì¶œë ¥: {"status":"healthy"}
   ```

3. ë°±ì—”ë“œ API ë¬¸ì„œ í™•ì¸
   - ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8001/api/docs ì—´ê¸°
   - OAuth 2.0 ì—”ë“œí¬ì¸íŠ¸ í™•ì¸:
     - POST /api/v1/auth/token
     - POST /api/v1/auth/register
     - GET /api/v1/auth/userinfo
     - POST /api/v1/auth/logout

4. í…ŒìŠ¤íŠ¸ ê³„ì • ì¤€ë¹„
   - ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ê³„ì •: testuser / testpass123
   - ë˜ëŠ” ìƒˆë¡œìš´ ê³„ì • ìƒì„±:
   ```bash
   curl -X POST "http://localhost:8001/api/v1/auth/register" \
     -H "Content-Type: application/json" \
     -d '{
       "username": "fluttertest",
       "email": "flutter@test.com",
       "password": "testpass123",
       "phone_number": "010-0000-0000"
     }'
   ```

5. ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
   ```bash
   curl -X POST "http://localhost:8001/api/v1/auth/token" \
     -H "Content-Type: application/json" \
     -d '{
       "grant_type": "password",
       "username": "testuser",
       "password": "testpass123",
       "device_type": "android"
     }'

   # ì¶œë ¥ í™•ì¸: access_token, refresh_token í¬í•¨ëœ JSON
   ```

6. ì²´í¬ë¦¬ìŠ¤íŠ¸
   - [ ] Flutter 3.24+ ì„¤ì¹˜ í™•ì¸
   - [ ] ë°±ì—”ë“œ ì„œë²„ http://localhost:8001 ì—ì„œ ì •ìƒ ì‘ë‹µ
   - [ ] API ë¬¸ì„œ í˜ì´ì§€ ì ‘ê·¼ ê°€ëŠ¥
   - [ ] í…ŒìŠ¤íŠ¸ ê³„ì • ë¡œê·¸ì¸ ì„±ê³µ
   - [ ] OAuth 2.0 í† í° ë°œê¸‰ í™•ì¸

âš ï¸ ìœ„ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ëª¨ë‘ í†µê³¼í•´ì•¼ ë‹¤ìŒ Phaseë¡œ ì§„í–‰!


4.1 Phase 1: í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
===============================

ì˜ˆìƒ ì‹œê°„: 2-3ì‹œê°„

ì‘ì—… ë‚´ìš©:
----------

1.1. Flutter í”„ë¡œì íŠ¸ ìƒì„±
   ```bash
   cd /Users/indent/Desktop/Noah/repo/
   flutter create asset_folio_mobile \
     --org com.assetfolio \
     --platforms=ios,android \
     --project-name asset_folio_mobile

   cd asset_folio_mobile
   ```

1.2. ì˜ì¡´ì„± ì¶”ê°€ (pubspec.yaml)

   pubspec.yaml íŒŒì¼ì— ë‹¤ìŒ ë‚´ìš© ì¶”ê°€:

   ```yaml
   dependencies:
     flutter:
       sdk: flutter

     # ìƒíƒœ ê´€ë¦¬
     riverpod: ^2.5.1
     flutter_riverpod: ^2.5.1

     # ë„¤íŠ¸ì›Œí‚¹
     dio: ^5.4.0
     json_annotation: ^4.8.1

     # ë³´ì•ˆ ì €ì¥ì†Œ
     flutter_secure_storage: ^9.0.0

     # ë¼ìš°íŒ…
     go_router: ^14.0.0

     # í™˜ê²½ë³€ìˆ˜
     flutter_dotenv: ^5.1.0

     # ë””ë°”ì´ìŠ¤ ì •ë³´
     device_info_plus: ^10.0.0

     # UI
     google_fonts: ^6.1.0
     flutter_svg: ^2.0.9
     shimmer: ^3.0.0

     # ìœ í‹¸ë¦¬í‹°
     intl: ^0.19.0
     logger: ^2.0.2
     connectivity_plus: ^6.0.0

   dev_dependencies:
     flutter_test:
       sdk: flutter
     flutter_lints: ^4.0.0
     build_runner: ^2.4.7
     json_serializable: ^6.7.1
   ```

   ì„¤ì¹˜:
   ```bash
   flutter pub get
   ```

1.3. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±

   í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— .env íŒŒì¼ ìƒì„±:

   âš ï¸ iOS SimulatorëŠ” localhostë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!
   - Android Emulator: 10.0.2.2:8001 ì‚¬ìš©
   - iOS Simulator: Macì˜ ì‹¤ì œ IP ì£¼ì†Œ ì‚¬ìš© (ì˜ˆ: 192.168.1.10:8001)

   Mac IP í™•ì¸:
   ```bash
   ifconfig | grep "inet " | grep -v 127.0.0.1
   ```

   .env íŒŒì¼ ìƒì„± (IPëŠ” ë³¸ì¸ì˜ Mac IPë¡œ ë³€ê²½):
   ```bash
   cat > .env << 'EOF'
   # Android Emulatorìš©
   # API_BASE_URL=http://10.0.2.2:8001/api/v1

   # iOS Simulatorìš© (ë³¸ì¸ì˜ Mac IPë¡œ ë³€ê²½!)
   API_BASE_URL=http://192.168.1.10:8001/api/v1
   EOF
   ```

   .env.example íŒŒì¼ë„ ìƒì„±:
   ```bash
   cat > .env.example << 'EOF'
   # Android Emulator: http://10.0.2.2:8001/api/v1
   # iOS Simulator: http://[YOUR_MAC_IP]:8001/api/v1
   API_BASE_URL=http://localhost:8001/api/v1
   EOF
   ```

   assets ì„¹ì…˜ ì¶”ê°€ (pubspec.yaml):
   ```yaml
   flutter:
     uses-material-design: true
     assets:
       - .env
   ```

1.4. .gitignore ì„¤ì •
   ```bash
   # .gitignoreì— .env ì¶”ê°€
   echo "" >> .gitignore
   echo "# Environment variables" >> .gitignore
   echo ".env" >> .gitignore
   ```

1.5. í´ë” êµ¬ì¡° ìƒì„±
   ```bash
   # lib/ í´ë” êµ¬ì¡° ìƒì„±
   mkdir -p lib/app
   mkdir -p lib/core/{config,constants,network,storage,providers,utils}
   mkdir -p lib/features/auth/{data/{models,repositories},presentation/{providers,screens,widgets}}
   mkdir -p lib/features/assets/{data/{models,repositories},presentation/{providers,screens,widgets}}
   mkdir -p lib/features/search/{data/repositories,presentation/{providers,screens,widgets}}
   mkdir -p lib/shared/{widgets,extensions}
   mkdir -p test/{unit,widget,integration}
   mkdir -p assets/images
   ```

1.6. analysis_options.yaml ì„¤ì •
   ```yaml
   include: package:flutter_lints/flutter.yaml

   linter:
     rules:
       prefer_const_constructors: true
       prefer_const_literals_to_create_immutables: true
       avoid_print: true
       prefer_single_quotes: true
   ```

1.7. Android ProGuard ì„¤ì •

   android/app/proguard-rules.pro íŒŒì¼ ìƒì„±:
   ```proguard
   # Flutter Wrapper
   -keep class io.flutter.app.** { *; }
   -keep class io.flutter.plugin.** { *; }
   -keep class io.flutter.util.** { *; }
   -keep class io.flutter.view.** { *; }
   -keep class io.flutter.** { *; }
   -keep class io.flutter.plugins.** { *; }

   # JSON Serializable - json_annotation ì‚¬ìš©
   -keepattributes *Annotation*
   -keepattributes Signature
   -keepattributes *Annotation*,Signature,Exception

   # Keep generated files by json_serializable
   -keep class **$*.g.dart { *; }
   -keep class * {
     @com.google.gson.annotations.SerializedName <fields>;
   }

   # Keep data models
   -keep class **.data.models.** { *; }

   # Keep JsonSerializable classes
   -keepclassmembers class * {
     @com.google.gson.annotations.SerializedName <fields>;
     @com.google.gson.annotations.Expose <fields>;
   }
   ```

   android/app/build.gradle ìˆ˜ì •:
   ```gradle
   buildTypes {
       release {
           signingConfig signingConfigs.debug
           minifyEnabled true
           proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
       }
   }
   ```

1.8. iOS ì„¤ì • (Keychain ë° HTTP í—ˆìš©)

   ios/Runner/Info.plistì— ì¶”ê°€:
   ```xml
   <key>KeychainAccessGroups</key>
   <array>
     <string>$(AppIdentifierPrefix)com.assetfolio.assetFolioMobile</string>
   </array>

   <!-- âš ï¸ CRITICAL: Allow HTTP for local development -->
   <key>NSAppTransportSecurity</key>
   <dict>
       <key>NSAllowsLocalNetworking</key>
       <true/>
       <key>NSAllowsArbitraryLoads</key>
       <true/>
   </dict>
   ```

   âš ï¸ IMPORTANT: Remove `NSAllowsArbitraryLoads` before App Store submission!
   For production, use HTTPS only or configure specific domain exceptions.

   Minimum iOS Version (ios/Podfileì„ ì—´ì–´ì„œ ìˆ˜ì •):
   ```ruby
   # Uncomment and set to iOS 12.0 (flutter_secure_storage requirement)
   platform :ios, '12.0'
   ```

1.9. ê²€ì¦
   ```bash
   # ë¦°íŠ¸ ê²€ì‚¬
   flutter analyze

   # ì˜ì¡´ì„± í™•ì¸
   flutter pub get

   # Flutter Doctor
   flutter doctor

   # ë¹Œë“œ í…ŒìŠ¤íŠ¸
   flutter build apk --debug
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ
- [ ] ëª¨ë“  íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ
- [ ] .env íŒŒì¼ ìƒì„± ë° API URL ì„¤ì • (iOSëŠ” Mac IP ì‚¬ìš©!)
- [ ] .gitignoreì— .env ì¶”ê°€ ì™„ë£Œ
- [ ] í´ë” êµ¬ì¡° ìƒì„± ì™„ë£Œ
- [ ] ProGuard ì„¤ì • ì™„ë£Œ (json_serializable ê·œì¹™ í¬í•¨)
- [ ] iOS Keychain ì„¤ì • ì™„ë£Œ
- [ ] flutter analyze í†µê³¼
- [ ] flutter build ì„±ê³µ


4.2 Phase 2: Core ë ˆì´ì–´ ë° í…Œë§ˆ êµ¬í˜„
======================================

ì˜ˆìƒ ì‹œê°„: 4-5ì‹œê°„

ì‘ì—… ë‚´ìš©:
----------

âš ï¸ ì¤‘ìš”: Themeì„ Phase 2ì—ì„œ êµ¬í˜„í•˜ëŠ” ì´ìœ 
LoginScreenê³¼ ë‹¤ë¥¸ UI ì»´í¬ë„ŒíŠ¸ê°€ Themeì— ì˜ì¡´í•˜ë¯€ë¡œ, Phase 4 ì´ì „ì— ì™„ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

2.1. í™˜ê²½ë³€ìˆ˜ ì„¤ì • (lib/core/config/env_config.dart)
   ```dart
   import 'package:flutter_dotenv/flutter_dotenv.dart';

   class EnvConfig {
     static String get apiBaseUrl => dotenv.env['API_BASE_URL'] ?? 'http://localhost:8001/api/v1';
   }
   ```

2.2. API ìƒìˆ˜ (lib/core/constants/api_constants.dart)
   ```dart
   import '../config/env_config.dart';

   class ApiConstants {
     static String get baseUrl => EnvConfig.apiBaseUrl;

     // Auth endpoints
     static const String authToken = '/auth/token';
     static const String authRegister = '/auth/register';
     static const String authUserInfo = '/auth/userinfo';
     static const String authLogout = '/auth/logout';
     static const String authRevoke = '/auth/revoke';

     // Asset endpoints
     static const String stocksKr = '/stocks/kr';
     static const String stocksUs = '/stocks/us';
     static const String crypto = '/crypto';
   }
   ```

2.3. ë³´ì•ˆ ì €ì¥ì†Œ (lib/core/storage/secure_storage.dart)
   ```dart
   import 'package:flutter_secure_storage/flutter_secure_storage.dart';

   class SecureStorage {
     final FlutterSecureStorage _storage = const FlutterSecureStorage(
       aOptions: AndroidOptions(encryptedSharedPreferences: true),
     );

     static const _accessTokenKey = 'access_token';
     static const _refreshTokenKey = 'refresh_token';
     static const _tokenExpiryKey = 'token_expiry';

     Future<void> saveTokens({
       required String accessToken,
       required String refreshToken,
       required int expiresIn,
     }) async {
       await _storage.write(key: _accessTokenKey, value: accessToken);
       await _storage.write(key: _refreshTokenKey, value: refreshToken);

       final expiryTime = DateTime.now().add(Duration(seconds: expiresIn - 60));
       await _storage.write(key: _tokenExpiryKey, value: expiryTime.toIso8601String());
     }

     Future<String?> getAccessToken() async {
       return await _storage.read(key: _accessTokenKey);
     }

     Future<String?> getRefreshToken() async {
       return await _storage.read(key: _refreshTokenKey);
     }

     Future<bool> hasTokens() async {
       final accessToken = await getAccessToken();
       final refreshToken = await getRefreshToken();
       return accessToken != null && refreshToken != null;
     }

     Future<void> clearTokens() async {
       await _storage.delete(key: _accessTokenKey);
       await _storage.delete(key: _refreshTokenKey);
       await _storage.delete(key: _tokenExpiryKey);
     }
   }
   ```

2.4. ì—ëŸ¬ í•¸ë“¤ëŸ¬ (lib/core/network/error_handler.dart)
   ```dart
   import 'package:dio/dio.dart';

   class ErrorHandler {
     static String getUserFriendlyError(DioException e) {
       switch (e.type) {
         case DioExceptionType.connectionTimeout:
         case DioExceptionType.sendTimeout:
         case DioExceptionType.receiveTimeout:
           return 'ì—°ê²° ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤';
         case DioExceptionType.badResponse:
           return _handleStatusCode(e.response?.statusCode);
         case DioExceptionType.cancel:
           return 'ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤';
         case DioExceptionType.connectionError:
           return 'ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”';
         default:
           return 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤';
       }
     }

     static String _handleStatusCode(int? statusCode) {
       switch (statusCode) {
         case 400:
           return 'ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤';
         case 401:
           return 'ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤';
         case 403:
           return 'ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤';
         case 404:
           return 'ìš”ì²­í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤';
         case 500:
           return 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤';
         default:
           return 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ (ì½”ë“œ: $statusCode)';
       }
     }
   }
   ```

2.5. Dio í´ë¼ì´ì–¸íŠ¸ (lib/core/network/dio_client.dart)

   âš ï¸ ì¤‘ìš”: Token Refreshì— Mutex íŒ¨í„´ ì ìš©

   ```dart
   import 'dart:io';
   import 'dart:async';  // Required for Completer
   import 'package:dio/dio.dart';
   import 'package:flutter/foundation.dart';
   import '../constants/api_constants.dart';
   import '../storage/secure_storage.dart';

   class DioClient {
     final Dio _dio;
     final SecureStorage _storage;
     bool _isRefreshing = false;
     final List<Function(String)> _refreshCallbacks = [];

     DioClient(this._storage) : _dio = Dio() {
       _dio.options.baseURL = ApiConstants.baseUrl;
       _dio.options.connectTimeout = const Duration(seconds: 30);
       _dio.options.receiveTimeout = const Duration(seconds: 30);

       // Request Interceptor
       _dio.interceptors.add(InterceptorsWrapper(
         onRequest: (options, handler) async {
           final token = await _storage.getAccessToken();
           if (token != null && !options.path.contains('/auth/token')) {
             options.headers['Authorization'] = 'Bearer $token';
           }
           return handler.next(options);
         },
         onError: (error, handler) async {
           // 401 ì—ëŸ¬ ì²˜ë¦¬ - Token Refresh (Mutex íŒ¨í„´)
           if (error.response?.statusCode == 401 &&
               !error.requestOptions.path.contains('/auth/token') &&
               !error.requestOptions.path.contains('/auth/userinfo')) {

             // ì´ë¯¸ refresh ì¤‘ì´ë©´ ëŒ€ê¸°
             if (_isRefreshing) {
               return _waitForRefresh(error.requestOptions, handler);
             }

             // Refresh ì‹œì‘
             _isRefreshing = true;

             try {
               final refreshToken = await _storage.getRefreshToken();
               if (refreshToken == null) {
                 await _storage.clearTokens();
                 return handler.reject(error);
               }

               // Refresh Tokenìœ¼ë¡œ ìƒˆ Access Token ë°œê¸‰
               final response = await _dio.post(
                 ApiConstants.authToken,
                 data: {
                   'grant_type': 'refresh_token',
                   'refresh_token': refreshToken,
                 },
               );

               final newAccessToken = response.data['access_token'] as String;
               final newRefreshToken = response.data['refresh_token'] as String;
               final expiresIn = response.data['expires_in'] as int;

               await _storage.saveTokens(
                 accessToken: newAccessToken,
                 refreshToken: newRefreshToken,
                 expiresIn: expiresIn,
               );

               // ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ë“¤ì—ê²Œ ì•Œë¦¼
               for (final callback in _refreshCallbacks) {
                 callback(newAccessToken);
               }
               _refreshCallbacks.clear();

               // ì›ë˜ ìš”ì²­ ì¬ì‹œë„
               error.requestOptions.headers['Authorization'] = 'Bearer $newAccessToken';
               return handler.resolve(await _dio.fetch(error.requestOptions));

             } catch (e) {
               await _storage.clearTokens();

               // âš ï¸ CRITICAL FIX: ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ë“¤ì—ê²Œ ì‹¤íŒ¨ ì•Œë¦¼
               for (final callback in _refreshCallbacks) {
                 // ë¹ˆ í† í°ìœ¼ë¡œ ì½œë°± í˜¸ì¶œ (ì‹¤íŒ¨ í‘œì‹œ)
                 try {
                   callback('');
                 } catch (_) {}
               }
               _refreshCallbacks.clear();

               return handler.reject(error);
             } finally {
               _isRefreshing = false;
             }
           }

           return handler.next(error);
         },
       ));

       // Logging Interceptor (ê°œë°œ í™˜ê²½ë§Œ)
       if (kDebugMode) {
         _dio.interceptors.add(LogInterceptor(
           requestBody: true,
           responseBody: true,
           logPrint: (obj) => debugPrint(obj.toString()),
         ));
       }
     }

     Future<Response> _waitForRefresh(
       RequestOptions options,
       ErrorInterceptorHandler handler,
     ) async {
       final completer = Completer<String>();
       _refreshCallbacks.add((token) => completer.complete(token));

       final newToken = await completer.future;

       // í† í°ì´ ë¹ˆ ë¬¸ìì—´ì´ë©´ ì‹¤íŒ¨í•œ ê²ƒ
       if (newToken.isEmpty) {
         throw DioException(
           requestOptions: options,
           response: Response(
             requestOptions: options,
             statusCode: 401,
             statusMessage: 'Token refresh failed',
           ),
         );
       }

       options.headers['Authorization'] = 'Bearer $newToken';
       return _dio.fetch(options);
     }

     Dio get dio => _dio;
   }
   ```

2.6. Core Providers (lib/core/providers/core_providers.dart)
   ```dart
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:dio/dio.dart';
   import '../storage/secure_storage.dart';
   import '../network/dio_client.dart';

   final secureStorageProvider = Provider<SecureStorage>((ref) {
     return SecureStorage();
   });

   final dioClientProvider = Provider<DioClient>((ref) {
     final storage = ref.watch(secureStorageProvider);
     return DioClient(storage);
   });

   final dioProvider = Provider<Dio>((ref) {
     return ref.watch(dioClientProvider).dio;
   });
   ```

2.7. Logger (lib/core/utils/logger.dart)
   ```dart
   import 'package:logger/logger.dart';

   final logger = Logger(
     printer: PrettyPrinter(
       methodCount: 0,
       errorMethodCount: 5,
       lineLength: 120,
       colors: true,
       printEmojis: true,
     ),
   );
   ```

2.8. í…Œë§ˆ ì„¤ì • (lib/app/theme.dart)

   âš ï¸ Phase 4ì˜ LoginScreenì´ Themeì— ì˜ì¡´í•˜ë¯€ë¡œ ë¨¼ì € êµ¬í˜„í•©ë‹ˆë‹¤.

   ```dart
   import 'package:flutter/material.dart';

   class AppTheme {
     static ThemeData lightTheme = ThemeData(
       useMaterial3: true,
       colorScheme: ColorScheme.fromSeed(
         seedColor: Colors.blue,
         brightness: Brightness.light,
       ),
       appBarTheme: const AppBarTheme(
         centerTitle: true,
         elevation: 0,
       ),
       cardTheme: CardTheme(
         elevation: 2,
         shape: RoundedRectangleBorder(
           borderRadius: BorderRadius.circular(12),
         ),
       ),
       inputDecorationTheme: InputDecorationTheme(
         border: OutlineInputBorder(
           borderRadius: BorderRadius.circular(8),
         ),
         filled: true,
       ),
       elevatedButtonTheme: ElevatedButtonThemeData(
         style: ElevatedButton.styleFrom(
           minimumSize: const Size.fromHeight(48),
           shape: RoundedRectangleBorder(
             borderRadius: BorderRadius.circular(8),
           ),
         ),
       ),
     );

     static ThemeData darkTheme = ThemeData(
       useMaterial3: true,
       colorScheme: ColorScheme.fromSeed(
         seedColor: Colors.blue,
         brightness: Brightness.dark,
       ),
       appBarTheme: const AppBarTheme(
         centerTitle: true,
         elevation: 0,
       ),
       cardTheme: CardTheme(
         elevation: 2,
         shape: RoundedRectangleBorder(
           borderRadius: BorderRadius.circular(12),
         ),
       ),
       inputDecorationTheme: InputDecorationTheme(
         border: OutlineInputBorder(
           borderRadius: BorderRadius.circular(8),
         ),
         filled: true,
       ),
       elevatedButtonTheme: ElevatedButtonThemeData(
         style: ElevatedButton.styleFrom(
           minimumSize: const Size.fromHeight(48),
           shape: RoundedRectangleBorder(
             borderRadius: BorderRadius.circular(8),
           ),
         ),
       ),
     );
   }
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] í™˜ê²½ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ
- [ ] SecureStorage êµ¬í˜„ ì™„ë£Œ
- [ ] DioClient with Mutex íŒ¨í„´ êµ¬í˜„ ì™„ë£Œ (ì‹¤íŒ¨ ì‹œ ì½œë°± ì•Œë¦¼ í¬í•¨)
- [ ] Core Providers ì •ì˜ ì™„ë£Œ
- [ ] Theme ì„¤ì • ì™„ë£Œ
- [ ] ì½”ë“œ ì œë„ˆë ˆì´ì…˜ (ì—†ìŒ, ì´ ë‹¨ê³„ì—ì„œëŠ” í•„ìš”ì—†ìŒ)


4.3 Phase 3: ë°±ì—”ë“œ ì—°ë™ í…ŒìŠ¤íŠ¸ (ì¤‘ìš”!)
=======================================

ì˜ˆìƒ ì‹œê°„: 1ì‹œê°„

ì‘ì—… ë‚´ìš©:
----------

3.1. ë°±ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„± (test/backend_integration_test.dart)
   ```dart
   import 'package:flutter_test/flutter_test.dart';
   import 'package:dio/dio.dart';
   import 'package:asset_folio_mobile/core/constants/api_constants.dart';

   void main() {
     late Dio dio;

     setUp(() {
       dio = Dio(BaseOptions(
         baseURL: ApiConstants.baseUrl,
         connectTimeout: const Duration(seconds: 10),
       ));
     });

     group('Backend Integration Tests', () {
       test('POST /auth/token - Login with valid credentials', () async {
         final response = await dio.post(
           ApiConstants.authToken,
           data: {
             'grant_type': 'password',
             'username': 'testuser',
             'password': 'testpass123',
             'device_type': 'android',
           },
         );

         expect(response.statusCode, 200);
         expect(response.data['access_token'], isNotNull);
         expect(response.data['refresh_token'], isNotNull);
         expect(response.data['token_type'], 'Bearer');
       });

       test('GET /auth/userinfo - Get user info with token', () async {
         // ë¨¼ì € ë¡œê·¸ì¸
         final loginResponse = await dio.post(
           ApiConstants.authToken,
           data: {
             'grant_type': 'password',
             'username': 'testuser',
             'password': 'testpass123',
             'device_type': 'android',
           },
         );

         final token = loginResponse.data['access_token'];

         // UserInfo ìš”ì²­
         final userInfoResponse = await dio.get(
           ApiConstants.authUserInfo,
           options: Options(headers: {'Authorization': 'Bearer $token'}),
         );

         expect(userInfoResponse.statusCode, 200);
         expect(userInfoResponse.data['username'], 'testuser');
         expect(userInfoResponse.data['sub'], isNotNull);
       });

       test('GET /stocks/kr - Get Korean stocks list', () async {
         // ë¡œê·¸ì¸
         final loginResponse = await dio.post(
           ApiConstants.authToken,
           data: {
             'grant_type': 'password',
             'username': 'testuser',
             'password': 'testpass123',
             'device_type': 'android',
           },
         );

         final token = loginResponse.data['access_token'];

         // í•œêµ­ ì£¼ì‹ ëª©ë¡ ìš”ì²­
         final stocksKrResponse = await dio.get(
           ApiConstants.stocksKr,
           options: Options(headers: {'Authorization': 'Bearer $token'}),
         );

         expect(stocksKrResponse.statusCode, 200);
         expect(stocksKrResponse.data['results'], isList);
       });

       test('GET /stocks/us - Get US stocks list', () async {
         // ë¡œê·¸ì¸
         final loginResponse = await dio.post(
           ApiConstants.authToken,
           data: {
             'grant_type': 'password',
             'username': 'testuser',
             'password': 'testpass123',
             'device_type': 'android',
           },
         );

         final token = loginResponse.data['access_token'];

         // ë¯¸êµ­ ì£¼ì‹ ëª©ë¡ ìš”ì²­
         final stocksUsResponse = await dio.get(
           ApiConstants.stocksUs,
           options: Options(headers: {'Authorization': 'Bearer $token'}),
         );

         expect(stocksUsResponse.statusCode, 200);
         expect(stocksUsResponse.data['results'], isList);
       });

       test('GET /crypto - Get crypto list', () async {
         // ë¡œê·¸ì¸
         final loginResponse = await dio.post(
           ApiConstants.authToken,
           data: {
             'grant_type': 'password',
             'username': 'testuser',
             'password': 'testpass123',
             'device_type': 'android',
           },
         );

         final token = loginResponse.data['access_token'];

         // ì•”í˜¸í™”í ëª©ë¡ ìš”ì²­
         final cryptoResponse = await dio.get(
           ApiConstants.crypto,
           options: Options(headers: {'Authorization': 'Bearer $token'}),
         );

         expect(cryptoResponse.statusCode, 200);
         expect(cryptoResponse.data['results'], isList);
       });
     });
   }
   ```

3.2. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
   ```bash
   # ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
   curl http://localhost:8001/health

   # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
   flutter test test/backend_integration_test.dart
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘
- [ ] ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] UserInfo í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] í•œêµ­ ì£¼ì‹ ëª©ë¡ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë¯¸êµ­ ì£¼ì‹ ëª©ë¡ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì•”í˜¸í™”í ëª©ë¡ í…ŒìŠ¤íŠ¸ í†µê³¼

âš ï¸ ì´ í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ í†µê³¼í•´ì•¼ ë‹¤ìŒ Phaseë¡œ ì§„í–‰!


4.4 Phase 4: ì¸ì¦ ê¸°ëŠ¥ êµ¬í˜„
===========================

ì˜ˆìƒ ì‹œê°„: 5-6ì‹œê°„

ì‘ì—… ë‚´ìš©:
----------

4.4.1 ë°ì´í„° ëª¨ë¸ ìƒì„±

TokenResponse (lib/features/auth/data/models/token_response.dart):
   ```dart
   import 'package:json_annotation/json_annotation.dart';

   part 'token_response.g.dart';

   @JsonSerializable()
   class TokenResponse {
     @JsonKey(name: 'access_token')
     final String accessToken;

     @JsonKey(name: 'refresh_token')
     final String refreshToken;

     @JsonKey(name: 'token_type')
     final String tokenType;

     @JsonKey(name: 'expires_in')
     final int expiresIn;

     @JsonKey(name: 'refresh_expires_in')
     final int refreshExpiresIn;

     TokenResponse({
       required this.accessToken,
       required this.refreshToken,
       required this.tokenType,
       required this.expiresIn,
       required this.refreshExpiresIn,
     });

     factory TokenResponse.fromJson(Map<String, dynamic> json) =>
         _$TokenResponseFromJson(json);
     Map<String, dynamic> toJson() => _$TokenResponseToJson(this);
   }
   ```

LoginRequest (lib/features/auth/data/models/login_request.dart):
   ```dart
   import 'package:json_annotation/json_annotation.dart';

   part 'login_request.g.dart';

   @JsonSerializable()
   class LoginRequest {
     @JsonKey(name: 'grant_type')
     final String grantType;

     final String username;
     final String password;

     @JsonKey(name: 'device_type')
     final String deviceType;

     @JsonKey(name: 'device_id')
     final String? deviceId;

     LoginRequest({
       this.grantType = 'password',
       required this.username,
       required this.password,
       required this.deviceType,
       this.deviceId,
     });

     Map<String, dynamic> toJson() => _$LoginRequestToJson(this);
   }
   ```

User (lib/features/auth/data/models/user.dart):
   ```dart
   import 'package:json_annotation/json_annotation.dart';

   part 'user.g.dart';

   @JsonSerializable()
   class User {
     final int id;
     final String username;
     final String email;

     @JsonKey(name: 'phone_number')
     final String? phoneNumber;

     @JsonKey(name: 'receive_daily_report')
     final bool receiveDailyReport;

     User({
       required this.id,
       required this.username,
       required this.email,
       this.phoneNumber,
       this.receiveDailyReport = false,
     });

     factory User.fromJson(Map<String, dynamic> json) => _$UserFromJson(json);
     Map<String, dynamic> toJson() => _$UserToJson(this);
   }
   ```

RegisterRequest (lib/features/auth/data/models/register_request.dart):
   ```dart
   import 'package:json_annotation/json_annotation.dart';

   part 'register_request.g.dart';

   @JsonSerializable()
   class RegisterRequest {
     final String username;
     final String email;
     final String password;

     @JsonKey(name: 'phone_number')
     final String? phoneNumber;

     @JsonKey(name: 'receive_daily_report')
     final bool receiveDailyReport;

     RegisterRequest({
       required this.username,
       required this.email,
       required this.password,
       this.phoneNumber,
       this.receiveDailyReport = false,
     });

     Map<String, dynamic> toJson() => _$RegisterRequestToJson(this);
   }
   ```

ì½”ë“œ ì œë„ˆë ˆì´ì…˜ ì‹¤í–‰:

   âš ï¸ CRITICAL: ë‹¤ìŒ 4ê°œ íŒŒì¼ì„ ëª¨ë‘ ìƒì„±í•œ í›„ì— ì‹¤í–‰í•˜ì„¸ìš”!
   - token_response.dart
   - login_request.dart
   - user.dart
   - register_request.dart

   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```

   Expected output: 4ê°œì˜ .g.dart íŒŒì¼ ìƒì„±ë¨
   - token_response.g.dart
   - login_request.g.dart
   - user.g.dart
   - register_request.g.dart

   âš ï¸ ë§Œì•½ "part 'xxx.g.dart' not found" ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´:
   ```bash
   flutter pub run build_runner clean
   flutter pub run build_runner build --delete-conflicting-outputs
   ```

4.4.2 Repository êµ¬í˜„

AuthRepository (lib/features/auth/data/repositories/auth_repository.dart):
   ```dart
   import 'dart:io';
   import 'package:dio/dio.dart';
   import 'package:device_info_plus/device_info_plus.dart';
   import '../../../../core/constants/api_constants.dart';
   import '../../../../core/storage/secure_storage.dart';
   import '../models/login_request.dart';
   import '../models/token_response.dart';
   import '../models/user.dart';
   import '../models/register_request.dart';

   class AuthRepository {
     final Dio _dio;
     final SecureStorage _storage;

     AuthRepository(this._dio, this._storage);

     Future<TokenResponse> login(String username, String password) async {
       final deviceId = await _getDeviceId();

       final request = LoginRequest(
         username: username,
         password: password,
         deviceType: Platform.isIOS ? 'ios' : 'android',
         deviceId: deviceId,
       );

       final response = await _dio.post(
         ApiConstants.authToken,
         data: request.toJson(),
       );

       final tokenResponse = TokenResponse.fromJson(response.data);

       await _storage.saveTokens(
         accessToken: tokenResponse.accessToken,
         refreshToken: tokenResponse.refreshToken,
         expiresIn: tokenResponse.expiresIn,
       );

       return tokenResponse;
     }

     Future<User> getUserInfo() async {
       final response = await _dio.get(ApiConstants.authUserInfo);
       return User.fromJson(response.data);
     }

     Future<void> logout() async {
       try {
         await _dio.post(ApiConstants.authLogout);
       } finally {
         await _storage.clearTokens();
       }
     }

     Future<User> register(RegisterRequest request) async {
       final response = await _dio.post(
         ApiConstants.authRegister,
         data: request.toJson(),
       );
       return User.fromJson(response.data);
     }

     Future<String> _getDeviceId() async {
       final deviceInfo = DeviceInfoPlugin();
       try {
         if (Platform.isAndroid) {
           final androidInfo = await deviceInfo.androidInfo;
           return androidInfo.id;
         } else if (Platform.isIOS) {
           final iosInfo = await deviceInfo.iosInfo;
           return iosInfo.identifierForVendor ?? 'unknown-ios';
         } else {
           // Web, Desktop, or other platforms
           return 'unknown-platform-${DateTime.now().millisecondsSinceEpoch}';
         }
       } catch (e) {
         return 'device-${DateTime.now().millisecondsSinceEpoch}';
       }
     }
   }
   ```

4.4.3 Provider êµ¬í˜„

AuthProvider (lib/features/auth/presentation/providers/auth_provider.dart):
   ```dart
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import '../../../../core/providers/core_providers.dart';
   import '../../data/repositories/auth_repository.dart';
   import '../../data/models/user.dart';
   import '../../data/models/register_request.dart';

   // Auth State
   class AuthState {
     final User? user;
     final bool isAuthenticated;
     final bool isLoading;
     final String? error;

     AuthState({
       this.user,
       this.isAuthenticated = false,
       this.isLoading = false,
       this.error,
     });

     AuthState copyWith({
       User? user,
       bool? isAuthenticated,
       bool? isLoading,
       String? error,
     }) {
       return AuthState(
         user: user ?? this.user,
         isAuthenticated: isAuthenticated ?? this.isAuthenticated,
         isLoading: isLoading ?? this.isLoading,
         error: error,
       );
     }
   }

   // Auth Notifier
   class AuthNotifier extends StateNotifier<AuthState> {
     final AuthRepository _repository;

     AuthNotifier(this._repository) : super(AuthState());

     Future<void> login(String username, String password) async {
       state = state.copyWith(isLoading: true, error: null);

       try {
         await _repository.login(username, password);
         final user = await _repository.getUserInfo();

         state = state.copyWith(
           user: user,
           isAuthenticated: true,
           isLoading: false,
         );
       } catch (e) {
         state = state.copyWith(
           isLoading: false,
           error: e.toString(),
         );
         rethrow;
       }
     }

     Future<void> logout() async {
       await _repository.logout();
       state = AuthState();
     }

     Future<void> loadUser() async {
       state = state.copyWith(isLoading: true);

       try {
         final user = await _repository.getUserInfo();
         state = state.copyWith(
           user: user,
           isAuthenticated: true,
           isLoading: false,
         );
       } catch (e) {
         await _repository.logout();
         state = state.copyWith(isLoading: false);
       }
     }

     Future<User> register(RegisterRequest request) async {
       state = state.copyWith(isLoading: true, error: null);

       try {
         final user = await _repository.register(request);
         state = state.copyWith(isLoading: false);
         return user;
       } catch (e) {
         state = state.copyWith(
           isLoading: false,
           error: e.toString(),
         );
         rethrow;
       }
     }
   }

   // Repository Provider
   final authRepositoryProvider = Provider<AuthRepository>((ref) {
     final dio = ref.watch(dioProvider);
     final storage = ref.watch(secureStorageProvider);
     return AuthRepository(dio, storage);
   });

   // Auth Provider
   final authProvider = StateNotifierProvider<AuthNotifier, AuthState>((ref) {
     final repository = ref.watch(authRepositoryProvider);
     return AuthNotifier(repository);
   });
   ```

4.4.4 UI í™”ë©´ êµ¬í˜„

SplashScreen (lib/features/auth/presentation/screens/splash_screen.dart):
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:go_router/go_router.dart';
   import '../../../../core/storage/secure_storage.dart';
   import '../../../../core/providers/core_providers.dart';
   import '../providers/auth_provider.dart';

   class SplashScreen extends ConsumerStatefulWidget {
     const SplashScreen({Key? key}) : super(key: key);

     @override
     ConsumerState<SplashScreen> createState() => _SplashScreenState();
   }

   class _SplashScreenState extends ConsumerState<SplashScreen> {
     @override
     void initState() {
       super.initState();
       _checkAuth();
     }

     Future<void> _checkAuth() async {
       final storage = ref.read(secureStorageProvider);
       final hasTokens = await storage.hasTokens();

       if (hasTokens) {
         await ref.read(authProvider.notifier).loadUser();
         if (mounted) {
           final isAuthenticated = ref.read(authProvider).isAuthenticated;
           context.go(isAuthenticated ? '/assets' : '/login');
         }
       } else {
         if (mounted) {
           context.go('/login');
         }
       }
     }

     @override
     Widget build(BuildContext context) {
       return const Scaffold(
         body: Center(
           child: CircularProgressIndicator(),
         ),
       );
     }
   }
   ```

LoginScreen (lib/features/auth/presentation/screens/login_screen.dart):
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:go_router/go_router.dart';
   import '../../../../core/network/error_handler.dart';
   import 'package:dio/dio.dart';
   import '../providers/auth_provider.dart';

   class LoginScreen extends ConsumerStatefulWidget {
     const LoginScreen({Key? key}) : super(key: key);

     @override
     ConsumerState<LoginScreen> createState() => _LoginScreenState();
   }

   class _LoginScreenState extends ConsumerState<LoginScreen> {
     final _formKey = GlobalKey<FormState>();
     final _usernameController = TextEditingController();
     final _passwordController = TextEditingController();
     bool _obscurePassword = true;

     @override
     Widget build(BuildContext context) {
       final authState = ref.watch(authProvider);

       ref.listen<AuthState>(authProvider, (previous, next) {
         if (next.isAuthenticated) {
           context.go('/assets');
         } else if (next.error != null) {
           ScaffoldMessenger.of(context).showSnackBar(
             SnackBar(content: Text(next.error!)),
           );
         }
       });

       return Scaffold(
         body: SafeArea(
           child: Padding(
             padding: const EdgeInsets.all(24.0),
             child: Form(
               key: _formKey,
               child: Column(
                 mainAxisAlignment: MainAxisAlignment.center,
                 crossAxisAlignment: CrossAxisAlignment.stretch,
                 children: [
                   Text(
                     'Asset Folio',
                     style: Theme.of(context).textTheme.displayMedium,
                     textAlign: TextAlign.center,
                   ),
                   const SizedBox(height: 48),

                   // Username Field
                   TextFormField(
                     controller: _usernameController,
                     decoration: const InputDecoration(
                       labelText: 'ì‚¬ìš©ìëª…',
                       prefixIcon: Icon(Icons.person),
                     ),
                     validator: (value) {
                       if (value == null || value.isEmpty) {
                         return 'ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”';
                       }
                       return null;
                     },
                   ),
                   const SizedBox(height: 16),

                   // Password Field
                   TextFormField(
                     controller: _passwordController,
                     obscureText: _obscurePassword,
                     decoration: InputDecoration(
                       labelText: 'ë¹„ë°€ë²ˆí˜¸',
                       prefixIcon: const Icon(Icons.lock),
                       suffixIcon: IconButton(
                         icon: Icon(
                           _obscurePassword
                               ? Icons.visibility
                               : Icons.visibility_off,
                         ),
                         onPressed: () {
                           setState(() {
                             _obscurePassword = !_obscurePassword;
                           });
                         },
                       ),
                     ),
                     validator: (value) {
                       if (value == null || value.isEmpty) {
                         return 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”';
                       }
                       return null;
                     },
                   ),
                   const SizedBox(height: 24),

                   // Login Button
                   ElevatedButton(
                     onPressed: authState.isLoading ? null : _handleLogin,
                     child: authState.isLoading
                         ? const SizedBox(
                             height: 20,
                             width: 20,
                             child: CircularProgressIndicator(strokeWidth: 2),
                           )
                         : const Text('ë¡œê·¸ì¸'),
                   ),
                   const SizedBox(height: 16),

                   // Register Link
                   TextButton(
                     onPressed: () => context.push('/register'),
                     child: const Text('íšŒì›ê°€ì…'),
                   ),
                 ],
               ),
             ),
           ),
         ),
       );
     }

     Future<void> _handleLogin() async {
       if (_formKey.currentState!.validate()) {
         try {
           await ref.read(authProvider.notifier).login(
                 _usernameController.text,
                 _passwordController.text,
               );
         } on DioException catch (e) {
           final errorMessage = ErrorHandler.getUserFriendlyError(e);
           if (mounted) {
             ScaffoldMessenger.of(context).showSnackBar(
               SnackBar(content: Text(errorMessage)),
             );
           }
         }
       }
     }

     @override
     void dispose() {
       _usernameController.dispose();
       _passwordController.dispose();
       super.dispose();
     }
   }
   ```

RegisterScreen (lib/features/auth/presentation/screens/register_screen.dart):
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:go_router/go_router.dart';
   import '../../../../core/network/error_handler.dart';
   import 'package:dio/dio.dart';
   import '../providers/auth_provider.dart';
   import '../../data/models/register_request.dart';

   class RegisterScreen extends ConsumerStatefulWidget {
     const RegisterScreen({Key? key}) : super(key: key);

     @override
     ConsumerState<RegisterScreen> createState() => _RegisterScreenState();
   }

   class _RegisterScreenState extends ConsumerState<RegisterScreen> {
     final _formKey = GlobalKey<FormState>();
     final _usernameController = TextEditingController();
     final _emailController = TextEditingController();
     final _passwordController = TextEditingController();
     final _passwordConfirmController = TextEditingController();
     final _phoneController = TextEditingController();
     bool _obscurePassword = true;
     bool _obscurePasswordConfirm = true;

     @override
     Widget build(BuildContext context) {
       final authState = ref.watch(authProvider);

       return Scaffold(
         appBar: AppBar(
           title: const Text('íšŒì›ê°€ì…'),
         ),
         body: SafeArea(
           child: SingleChildScrollView(
             padding: const EdgeInsets.all(24.0),
             child: Form(
               key: _formKey,
               child: Column(
                 crossAxisAlignment: CrossAxisAlignment.stretch,
                 children: [
                   const SizedBox(height: 24),

                   // Username Field
                   TextFormField(
                     controller: _usernameController,
                     decoration: const InputDecoration(
                       labelText: 'ì‚¬ìš©ìëª…',
                       prefixIcon: Icon(Icons.person),
                     ),
                     validator: (value) {
                       if (value == null || value.isEmpty) {
                         return 'ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”';
                       }
                       if (value.length < 3) {
                         return 'ì‚¬ìš©ìëª…ì€ 3ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤';
                       }
                       return null;
                     },
                   ),
                   const SizedBox(height: 16),

                   // Email Field
                   TextFormField(
                     controller: _emailController,
                     decoration: const InputDecoration(
                       labelText: 'ì´ë©”ì¼',
                       prefixIcon: Icon(Icons.email),
                     ),
                     keyboardType: TextInputType.emailAddress,
                     validator: (value) {
                       if (value == null || value.isEmpty) {
                         return 'ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”';
                       }
                       if (!value.contains('@')) {
                         return 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤';
                       }
                       return null;
                     },
                   ),
                   const SizedBox(height: 16),

                   // Password Field
                   TextFormField(
                     controller: _passwordController,
                     obscureText: _obscurePassword,
                     decoration: InputDecoration(
                       labelText: 'ë¹„ë°€ë²ˆí˜¸',
                       prefixIcon: const Icon(Icons.lock),
                       suffixIcon: IconButton(
                         icon: Icon(
                           _obscurePassword
                               ? Icons.visibility
                               : Icons.visibility_off,
                         ),
                         onPressed: () {
                           setState(() {
                             _obscurePassword = !_obscurePassword;
                           });
                         },
                       ),
                     ),
                     validator: (value) {
                       if (value == null || value.isEmpty) {
                         return 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”';
                       }
                       if (value.length < 8) {
                         return 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤';
                       }
                       return null;
                     },
                   ),
                   const SizedBox(height: 16),

                   // Password Confirm Field
                   TextFormField(
                     controller: _passwordConfirmController,
                     obscureText: _obscurePasswordConfirm,
                     decoration: InputDecoration(
                       labelText: 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸',
                       prefixIcon: const Icon(Icons.lock_outline),
                       suffixIcon: IconButton(
                         icon: Icon(
                           _obscurePasswordConfirm
                               ? Icons.visibility
                               : Icons.visibility_off,
                         ),
                         onPressed: () {
                           setState(() {
                             _obscurePasswordConfirm = !_obscurePasswordConfirm;
                           });
                         },
                       ),
                     ),
                     validator: (value) {
                       if (value != _passwordController.text) {
                         return 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤';
                       }
                       return null;
                     },
                   ),
                   const SizedBox(height: 16),

                   // Phone Field (Optional)
                   TextFormField(
                     controller: _phoneController,
                     decoration: const InputDecoration(
                       labelText: 'ì „í™”ë²ˆí˜¸ (ì„ íƒ)',
                       prefixIcon: Icon(Icons.phone),
                       hintText: '010-1234-5678',
                     ),
                     keyboardType: TextInputType.phone,
                   ),
                   const SizedBox(height: 24),

                   // Register Button
                   ElevatedButton(
                     onPressed: authState.isLoading ? null : _handleRegister,
                     child: authState.isLoading
                         ? const SizedBox(
                             height: 20,
                             width: 20,
                             child: CircularProgressIndicator(strokeWidth: 2),
                           )
                         : const Text('íšŒì›ê°€ì…'),
                   ),
                 ],
               ),
             ),
           ),
         ),
       );
     }

     Future<void> _handleRegister() async {
       if (_formKey.currentState!.validate()) {
         try {
           final request = RegisterRequest(
             username: _usernameController.text,
             email: _emailController.text,
             password: _passwordController.text,
             phoneNumber: _phoneController.text.isNotEmpty
                 ? _phoneController.text
                 : null,
             receiveDailyReport: false,
           );

           await ref.read(authProvider.notifier).register(request);

           if (mounted) {
             ScaffoldMessenger.of(context).showSnackBar(
               const SnackBar(content: Text('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.')),
             );
             context.pop();
           }
         } on DioException catch (e) {
           final errorMessage = ErrorHandler.getUserFriendlyError(e);
           if (mounted) {
             ScaffoldMessenger.of(context).showSnackBar(
               SnackBar(content: Text(errorMessage)),
             );
           }
         }
       }
     }

     @override
     void dispose() {
       _usernameController.dispose();
       _emailController.dispose();
       _passwordController.dispose();
       _passwordConfirmController.dispose();
       _phoneController.dispose();
       super.dispose();
     }
   }
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] ëª¨ë“  ë°ì´í„° ëª¨ë¸ ìƒì„± ì™„ë£Œ
- [ ] ì½”ë“œ ì œë„ˆë ˆì´ì…˜ ì‹¤í–‰ ì™„ë£Œ (*.g.dart íŒŒì¼ ìƒì„±ë¨)
- [ ] AuthRepository êµ¬í˜„ ì™„ë£Œ
- [ ] AuthProvider êµ¬í˜„ ì™„ë£Œ
- [ ] SplashScreen êµ¬í˜„ ì™„ë£Œ
- [ ] LoginScreen êµ¬í˜„ ì™„ë£Œ
- [ ] RegisterScreen êµ¬í˜„ ì™„ë£Œ


4.5 Phase 5: ë¼ìš°íŒ… ë° Main ì•± ì„¤ì •
===================================

ì˜ˆìƒ ì‹œê°„: 1-2ì‹œê°„

âš ï¸ ì£¼ì˜: AssetListScreen, AssetDetailScreen, SearchScreenì€ ì•„ì§ êµ¬í˜„ ì „ì´ë¯€ë¡œ
          ì¼ë‹¨ Placeholderë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. Phase 6, 7ì—ì„œ ì‹¤ì œ í™”ë©´ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤.

5.1. Placeholder ìŠ¤í¬ë¦° ìƒì„± (Phase 6, 7 ì „ê¹Œì§€ ì„ì‹œ ì‚¬ìš©)

   lib/features/assets/presentation/screens/asset_list_screen.dart (ì„ì‹œ):
   ```dart
   import 'package:flutter/material.dart';

   class AssetListScreen extends StatelessWidget {
     const AssetListScreen({Key? key}) : super(key: key);

     @override
     Widget build(BuildContext context) {
       return Scaffold(
         appBar: AppBar(title: const Text('Assets')),
         body: const Center(
           child: Text('AssetListScreen - Phase 6ì—ì„œ êµ¬í˜„ ì˜ˆì •'),
         ),
       );
     }
   }
   ```

   lib/features/assets/presentation/screens/asset_detail_screen.dart (ì„ì‹œ):
   ```dart
   import 'package:flutter/material.dart';

   class AssetDetailScreen extends StatelessWidget {
     final String assetType;
     final String assetId;

     const AssetDetailScreen({
       Key? key,
       required this.assetType,
       required this.assetId,
     }) : super(key: key);

     @override
     Widget build(BuildContext context) {
       return Scaffold(
         appBar: AppBar(title: const Text('Asset Detail')),
         body: Center(
           child: Text('Asset $assetType/$assetId - Phase 6ì—ì„œ êµ¬í˜„ ì˜ˆì •'),
         ),
       );
     }
   }
   ```

   lib/features/search/presentation/screens/search_screen.dart (ì„ì‹œ):
   ```dart
   import 'package:flutter/material.dart';

   class SearchScreen extends StatelessWidget {
     const SearchScreen({Key? key}) : super(key: key);

     @override
     Widget build(BuildContext context) {
       return Scaffold(
         appBar: AppBar(title: const Text('Search')),
         body: const Center(
           child: Text('SearchScreen - Phase 7ì—ì„œ êµ¬í˜„ ì˜ˆì •'),
         ),
       );
     }
   }
   ```

5.2. Router ì„¤ì • (lib/app/router.dart)
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:go_router/go_router.dart';
   import '../features/auth/presentation/screens/splash_screen.dart';
   import '../features/auth/presentation/screens/login_screen.dart';
   import '../features/auth/presentation/screens/register_screen.dart';
   import '../features/assets/presentation/screens/asset_list_screen.dart';
   import '../features/assets/presentation/screens/asset_detail_screen.dart';
   import '../features/search/presentation/screens/search_screen.dart';
   import '../features/auth/presentation/providers/auth_provider.dart';

   final routerProvider = Provider<GoRouter>((ref) {
     return GoRouter(
       initialLocation: '/splash',
       redirect: (context, state) {
         final authState = ref.read(authProvider);
         final isAuth = authState.isAuthenticated;

         // Don't redirect from splash - let it handle auth check
         if (state.matchedLocation == '/splash') {
           return null;
         }

         final isAuthPath = state.matchedLocation.startsWith('/login') ||
                            state.matchedLocation.startsWith('/register');

         // Redirect to login if not authenticated and not on auth pages
         if (!isAuth && !isAuthPath) {
           return '/login';
         }

         // Redirect to assets if authenticated and on auth pages
         if (isAuth && isAuthPath) {
           return '/assets';
         }

         return null;
       },
       routes: [
         GoRoute(
           path: '/splash',
           builder: (context, state) => const SplashScreen(),
         ),
         GoRoute(
           path: '/login',
           builder: (context, state) => const LoginScreen(),
         ),
         GoRoute(
           path: '/register',
           builder: (context, state) => const RegisterScreen(),
         ),
         GoRoute(
           path: '/assets',
           builder: (context, state) => const AssetListScreen(),
         ),
         GoRoute(
           path: '/assets/:type/:id',
           builder: (context, state) {
             final type = state.pathParameters['type']!;
             final id = state.pathParameters['id']!;
             return AssetDetailScreen(assetType: type, assetId: id);
           },
         ),
         GoRoute(
           path: '/search',
           builder: (context, state) => const SearchScreen(),
         ),
       ],
     );
   });
   ```

5.3. App ìœ„ì ¯ (lib/app/app.dart)
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'router.dart';
   import 'theme.dart';

   class App extends ConsumerWidget {
     const App({Key? key}) : super(key: key);

     @override
     Widget build(BuildContext context, WidgetRef ref) {
       final router = ref.watch(routerProvider);

       return MaterialApp.router(
         title: 'Asset Folio',
         theme: AppTheme.lightTheme,
         darkTheme: AppTheme.darkTheme,
         routerConfig: router,
         debugShowCheckedModeBanner: false,
       );
     }
   }
   ```

5.4. Main íŒŒì¼ (lib/main.dart)
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:flutter_dotenv/flutter_dotenv.dart';
   import 'app/app.dart';

   Future<void> main() async {
     WidgetsFlutterBinding.ensureInitialized();

     // Load .env file
     await dotenv.load(fileName: '.env');

     runApp(
       const ProviderScope(
         child: App(),
       ),
     );
   }
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] Placeholder ìŠ¤í¬ë¦° 3ê°œ ìƒì„± ì™„ë£Œ
- [ ] Router ì„¤ì • ì™„ë£Œ
- [ ] App ìœ„ì ¯ êµ¬í˜„ ì™„ë£Œ
- [ ] main.dart ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] ì•± ì‹¤í–‰ ê°€ëŠ¥ (ë¡œê·¸ì¸ê¹Œì§€ ë™ì‘ í™•ì¸)

âš ï¸ ì´ ì‹œì ì—ì„œ ì•±ì„ ì‹¤í–‰í•˜ë©´ ë¡œê·¸ì¸ â†’ Asset List (Placeholder) í™”ë©´ê¹Œì§€ ë™ì‘í•©ë‹ˆë‹¤!


4.6 Phase 6: ìì‚° ëª©ë¡ ê¸°ëŠ¥ êµ¬í˜„
================================

ì˜ˆìƒ ì‹œê°„: 5-6ì‹œê°„

âš ï¸ ì´ Phaseì—ì„œ Placeholderë¥¼ ì‹¤ì œ êµ¬í˜„ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤.

6.1. Asset ëª¨ë¸ (lib/features/assets/data/models/asset.dart)
   ```dart
   import 'package:json_annotation/json_annotation.dart';

   part 'asset.g.dart';

   @JsonSerializable()
   class Asset {
     final int id;
     final String code;
     final String name;

     @JsonKey(name: 'current_price')
     final double? currentPrice;

     @JsonKey(name: 'change_rate')
     final double? changeRate;

     @JsonKey(name: 'change_amount')
     final double? changeAmount;

     @JsonKey(name: 'market_cap')
     final double? marketCap;

     final String? currency;

     @JsonKey(name: 'asset_type')
     final String assetType; // 'KR', 'US', 'CRYPTO'

     Asset({
       required this.id,
       required this.code,
       required this.name,
       this.currentPrice,
       this.changeRate,
       this.changeAmount,
       this.marketCap,
       this.currency,
       required this.assetType,
     });

     factory Asset.fromJson(Map<String, dynamic> json) => _$AssetFromJson(json);
     Map<String, dynamic> toJson() => _$AssetToJson(this);

     /// Helper method to convert asset type to API endpoint path
     String getApiEndpoint() {
       switch (assetType) {
         case 'KR':
           return '/stocks/kr';
         case 'US':
           return '/stocks/us';
         case 'CRYPTO':
           return '/crypto';
         default:
           throw ArgumentError('Unknown asset type: $assetType');
       }
     }
   }

   // Pagination Response
   @JsonSerializable()
   class AssetListResponse {
     final int count;
     final String? next;
     final String? previous;
     final List<Asset> results;

     AssetListResponse({
       required this.count,
       this.next,
       this.previous,
       required this.results,
     });

     factory AssetListResponse.fromJson(Map<String, dynamic> json) =>
         _$AssetListResponseFromJson(json);
   }
   ```

6.2. AssetRepository (lib/features/assets/data/repositories/asset_repository.dart)
   ```dart
   import 'package:dio/dio.dart';
   import '../../../../core/constants/api_constants.dart';
   import '../models/asset.dart';

   class AssetRepository {
     final Dio _dio;

     AssetRepository(this._dio);

     Future<AssetListResponse> getKoreanStocks({int page = 1, int pageSize = 20}) async {
       final response = await _dio.get(
         ApiConstants.stocksKr,
         queryParameters: {'page': page, 'page_size': pageSize},
       );
       return AssetListResponse.fromJson(response.data);
     }

     Future<AssetListResponse> getUsStocks({int page = 1, int pageSize = 20}) async {
       final response = await _dio.get(
         ApiConstants.stocksUs,
         queryParameters: {'page': page, 'page_size': pageSize},
       );
       return AssetListResponse.fromJson(response.data);
     }

     Future<AssetListResponse> getCrypto({int page = 1, int pageSize = 20}) async {
       final response = await _dio.get(
         ApiConstants.crypto,
         queryParameters: {'page': page, 'page_size': pageSize},
       );
       return AssetListResponse.fromJson(response.data);
     }

     Future<Asset> getAssetDetail(String assetType, String id) async {
       final endpoint = assetType == 'KR'
           ? '${ApiConstants.stocksKr}/$id'
           : assetType == 'US'
               ? '${ApiConstants.stocksUs}/$id'
               : '${ApiConstants.crypto}/$id';

       final response = await _dio.get(endpoint);
       return Asset.fromJson(response.data);
     }
   }
   ```

   ì½”ë“œ ì œë„ˆë ˆì´ì…˜:
   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```

6.3. AssetProvider (lib/features/assets/presentation/providers/asset_provider.dart)
   ```dart
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import '../../../../core/providers/core_providers.dart';
   import '../../data/repositories/asset_repository.dart';
   import '../../data/models/asset.dart';

   // Repository Provider
   final assetRepositoryProvider = Provider<AssetRepository>((ref) {
     final dio = ref.watch(dioProvider);
     return AssetRepository(dio);
   });

   // Asset State
   class AssetState {
     final List<Asset> krAssets;
     final List<Asset> usAssets;
     final List<Asset> cryptoAssets;
     final bool isLoading;
     final String? error;
     final bool hasMoreKr;
     final bool hasMoreUs;
     final bool hasMoreCrypto;

     AssetState({
       this.krAssets = const [],
       this.usAssets = const [],
       this.cryptoAssets = const [],
       this.isLoading = false,
       this.error,
       this.hasMoreKr = true,
       this.hasMoreUs = true,
       this.hasMoreCrypto = true,
     });

     AssetState copyWith({
       List<Asset>? krAssets,
       List<Asset>? usAssets,
       List<Asset>? cryptoAssets,
       bool? isLoading,
       String? error,
       bool? hasMoreKr,
       bool? hasMoreUs,
       bool? hasMoreCrypto,
     }) {
       return AssetState(
         krAssets: krAssets ?? this.krAssets,
         usAssets: usAssets ?? this.usAssets,
         cryptoAssets: cryptoAssets ?? this.cryptoAssets,
         isLoading: isLoading ?? this.isLoading,
         error: error,
         hasMoreKr: hasMoreKr ?? this.hasMoreKr,
         hasMoreUs: hasMoreUs ?? this.hasMoreUs,
         hasMoreCrypto: hasMoreCrypto ?? this.hasMoreCrypto,
       );
     }
   }

   // Asset Notifier
   class AssetNotifier extends StateNotifier<AssetState> {
     final AssetRepository _repository;
     int _krPage = 1;
     int _usPage = 1;
     int _cryptoPage = 1;

     AssetNotifier(this._repository) : super(AssetState());

     Future<void> loadKoreanStocks({bool refresh = false}) async {
       if (refresh) {
         _krPage = 1;
         state = state.copyWith(krAssets: [], hasMoreKr: true);
       }

       if (!state.hasMoreKr || state.isLoading) return;

       state = state.copyWith(isLoading: true, error: null);

       try {
         final response = await _repository.getKoreanStocks(page: _krPage);
         final newAssets = refresh ? response.results : [...state.krAssets, ...response.results];

         state = state.copyWith(
           krAssets: newAssets,
           isLoading: false,
           hasMoreKr: response.next != null,
         );

         _krPage++;
       } catch (e) {
         state = state.copyWith(isLoading: false, error: e.toString());
       }
     }

     Future<void> loadUsStocks({bool refresh = false}) async {
       if (refresh) {
         _usPage = 1;
         state = state.copyWith(usAssets: [], hasMoreUs: true);
       }

       if (!state.hasMoreUs || state.isLoading) return;

       state = state.copyWith(isLoading: true, error: null);

       try {
         final response = await _repository.getUsStocks(page: _usPage);
         final newAssets = refresh ? response.results : [...state.usAssets, ...response.results];

         state = state.copyWith(
           usAssets: newAssets,
           isLoading: false,
           hasMoreUs: response.next != null,
         );

         _usPage++;
       } catch (e) {
         state = state.copyWith(isLoading: false, error: e.toString());
       }
     }

     Future<void> loadCrypto({bool refresh = false}) async {
       if (refresh) {
         _cryptoPage = 1;
         state = state.copyWith(cryptoAssets: [], hasMoreCrypto: true);
       }

       if (!state.hasMoreCrypto || state.isLoading) return;

       state = state.copyWith(isLoading: true, error: null);

       try {
         final response = await _repository.getCrypto(page: _cryptoPage);
         final newAssets = refresh ? response.results : [...state.cryptoAssets, ...response.results];

         state = state.copyWith(
           cryptoAssets: newAssets,
           isLoading: false,
           hasMoreCrypto: response.next != null,
         );

         _cryptoPage++;
       } catch (e) {
         state = state.copyWith(isLoading: false, error: e.toString());
       }
     }
   }

   // Asset Provider
   final assetProvider = StateNotifierProvider<AssetNotifier, AssetState>((ref) {
     final repository = ref.watch(assetRepositoryProvider);
     return AssetNotifier(repository);
   });
   ```

6.4. AssetListScreen (lib/features/assets/presentation/screens/asset_list_screen.dart) - Placeholder êµì²´
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:go_router/go_router.dart';
   import '../providers/asset_provider.dart';
   import '../../../../features/auth/presentation/providers/auth_provider.dart';
   import '../widgets/asset_card.dart';

   class AssetListScreen extends ConsumerStatefulWidget {
     const AssetListScreen({Key? key}) : super(key: key);

     @override
     ConsumerState<AssetListScreen> createState() => _AssetListScreenState();
   }

   class _AssetListScreenState extends ConsumerState<AssetListScreen>
       with SingleTickerProviderStateMixin {
     late TabController _tabController;
     final ScrollController _krScrollController = ScrollController();
     final ScrollController _usScrollController = ScrollController();
     final ScrollController _cryptoScrollController = ScrollController();

     @override
     void initState() {
       super.initState();
       _tabController = TabController(length: 3, vsync: this);

       // Load initial data
       Future.microtask(() {
         ref.read(assetProvider.notifier).loadKoreanStocks();
       });

       // Setup scroll listeners for pagination
       _krScrollController.addListener(_onKrScroll);
       _usScrollController.addListener(_onUsScroll);
       _cryptoScrollController.addListener(_onCryptoScroll);

       _tabController.addListener(() {
         if (_tabController.index == 1 && ref.read(assetProvider).usAssets.isEmpty) {
           ref.read(assetProvider.notifier).loadUsStocks();
         } else if (_tabController.index == 2 && ref.read(assetProvider).cryptoAssets.isEmpty) {
           ref.read(assetProvider.notifier).loadCrypto();
         }
       });
     }

     void _onKrScroll() {
       if (_krScrollController.position.pixels >= _krScrollController.position.maxScrollExtent * 0.8) {
         ref.read(assetProvider.notifier).loadKoreanStocks();
       }
     }

     void _onUsScroll() {
       if (_usScrollController.position.pixels >= _usScrollController.position.maxScrollExtent * 0.8) {
         ref.read(assetProvider.notifier).loadUsStocks();
       }
     }

     void _onCryptoScroll() {
       if (_cryptoScrollController.position.pixels >= _cryptoScrollController.position.maxScrollExtent * 0.8) {
         ref.read(assetProvider.notifier).loadCrypto();
       }
     }

     @override
     Widget build(BuildContext context) {
       final assetState = ref.watch(assetProvider);

       return Scaffold(
         appBar: AppBar(
           title: const Text('Asset Folio'),
           actions: [
             IconButton(
               icon: const Icon(Icons.search),
               onPressed: () => context.push('/search'),
             ),
             IconButton(
               icon: const Icon(Icons.logout),
               onPressed: () async {
                 await ref.read(authProvider.notifier).logout();
                 if (context.mounted) {
                   context.go('/login');
                 }
               },
             ),
           ],
           bottom: TabBar(
             controller: _tabController,
             tabs: const [
               Tab(text: 'í•œêµ­'),
               Tab(text: 'ë¯¸êµ­'),
               Tab(text: 'ì•”í˜¸í™”í'),
             ],
           ),
         ),
         body: TabBarView(
           controller: _tabController,
           children: [
             _buildAssetList(assetState.krAssets, _krScrollController, assetState.isLoading),
             _buildAssetList(assetState.usAssets, _usScrollController, assetState.isLoading),
             _buildAssetList(assetState.cryptoAssets, _cryptoScrollController, assetState.isLoading),
           ],
         ),
       );
     }

     Widget _buildAssetList(List assets, ScrollController controller, bool isLoading) {
       if (assets.isEmpty && isLoading) {
         return const Center(child: CircularProgressIndicator());
       }

       if (assets.isEmpty) {
         return const Center(child: Text('ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤'));
       }

       return RefreshIndicator(
         onRefresh: () async {
           if (_tabController.index == 0) {
             await ref.read(assetProvider.notifier).loadKoreanStocks(refresh: true);
           } else if (_tabController.index == 1) {
             await ref.read(assetProvider.notifier).loadUsStocks(refresh: true);
           } else {
             await ref.read(assetProvider.notifier).loadCrypto(refresh: true);
           }
         },
         child: ListView.builder(
           controller: controller,
           itemCount: assets.length + (isLoading ? 1 : 0),
           itemBuilder: (context, index) {
             if (index >= assets.length) {
               return const Center(
                 child: Padding(
                   padding: EdgeInsets.all(16.0),
                   child: CircularProgressIndicator(),
                 ),
               );
             }

             return AssetCard(
               asset: assets[index],
               onTap: () {
                 final asset = assets[index];
                 context.push('/assets/${asset.assetType}/${asset.id}');
               },
             );
           },
         ),
       );
     }

     @override
     void dispose() {
       _tabController.dispose();
       _krScrollController.dispose();
       _usScrollController.dispose();
       _cryptoScrollController.dispose();
       super.dispose();
     }
   }
   ```

6.5. AssetCard ìœ„ì ¯ (lib/features/assets/presentation/widgets/asset_card.dart)
   ```dart
   import 'package:flutter/material.dart';
   import '../../data/models/asset.dart';
   import 'package:intl/intl.dart';

   class AssetCard extends StatelessWidget {
     final Asset asset;
     final VoidCallback onTap;

     const AssetCard({
       Key? key,
       required this.asset,
       required this.onTap,
     }) : super(key: key);

     @override
     Widget build(BuildContext context) {
       final isPositive = (asset.changeRate ?? 0) >= 0;
       final changeColor = isPositive ? Colors.red : Colors.blue;

       return Card(
         margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
         child: ListTile(
           onTap: onTap,
           title: Text(
             asset.name,
             style: const TextStyle(fontWeight: FontWeight.bold),
           ),
           subtitle: Text(asset.code),
           trailing: Column(
             mainAxisAlignment: MainAxisAlignment.center,
             crossAxisAlignment: CrossAxisAlignment.end,
             children: [
               Text(
                 _formatPrice(asset.currentPrice),
                 style: const TextStyle(
                   fontWeight: FontWeight.bold,
                   fontSize: 16,
                 ),
               ),
               Text(
                 '${isPositive ? '+' : ''}${_formatRate(asset.changeRate)}%',
                 style: TextStyle(
                   color: changeColor,
                   fontWeight: FontWeight.bold,
                 ),
               ),
             ],
           ),
         ),
       );
     }

     String _formatPrice(double? price) {
       if (price == null) return '-';
       final formatter = NumberFormat.currency(symbol: asset.currency ?? '\$', decimalDigits: 2);
       return formatter.format(price);
     }

     String _formatRate(double? rate) {
       if (rate == null) return '0.00';
       return rate.toStringAsFixed(2);
     }
   }
   ```

6.6. AssetDetailScreen (lib/features/assets/presentation/screens/asset_detail_screen.dart) - Placeholder êµì²´
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import '../../data/models/asset.dart';
   import '../../data/repositories/asset_repository.dart';
   import '../../../../core/providers/core_providers.dart';
   import 'package:intl/intl.dart';

   final assetDetailProvider = FutureProvider.family<Asset, Map<String, String>>((ref, params) async {
     final repository = AssetRepository(ref.watch(dioProvider));
     return await repository.getAssetDetail(params['type']!, params['id']!);
   });

   class AssetDetailScreen extends ConsumerWidget {
     final String assetType;
     final String assetId;

     const AssetDetailScreen({
       Key? key,
       required this.assetType,
       required this.assetId,
     }) : super(key: key);

     @override
     Widget build(BuildContext context, WidgetRef ref) {
       final assetAsync = ref.watch(assetDetailProvider({'type': assetType, 'id': assetId}));

       return Scaffold(
         appBar: AppBar(
           title: const Text('ìì‚° ìƒì„¸'),
         ),
         body: assetAsync.when(
           data: (asset) => _buildDetail(context, asset),
           loading: () => const Center(child: CircularProgressIndicator()),
           error: (error, stack) => Center(child: Text('Error: $error')),
         ),
       );
     }

     Widget _buildDetail(BuildContext context, Asset asset) {
       final isPositive = (asset.changeRate ?? 0) >= 0;
       final changeColor = isPositive ? Colors.red : Colors.blue;

       return SingleChildScrollView(
         padding: const EdgeInsets.all(16),
         child: Column(
           crossAxisAlignment: CrossAxisAlignment.start,
           children: [
             Text(
               asset.name,
               style: Theme.of(context).textTheme.headlineMedium,
             ),
             const SizedBox(height: 8),
             Text(
               asset.code,
               style: Theme.of(context).textTheme.titleMedium?.copyWith(
                     color: Colors.grey,
                   ),
             ),
             const SizedBox(height: 24),

             Card(
               child: Padding(
                 padding: const EdgeInsets.all(16),
                 child: Column(
                   crossAxisAlignment: CrossAxisAlignment.start,
                   children: [
                     Row(
                       mainAxisAlignment: MainAxisAlignment.spaceBetween,
                       children: [
                         const Text('í˜„ì¬ê°€', style: TextStyle(fontSize: 16)),
                         Text(
                           _formatPrice(asset.currentPrice, asset.currency),
                           style: const TextStyle(
                             fontSize: 24,
                             fontWeight: FontWeight.bold,
                           ),
                         ),
                       ],
                     ),
                     const SizedBox(height: 16),
                     Row(
                       mainAxisAlignment: MainAxisAlignment.spaceBetween,
                       children: [
                         const Text('ë³€ë™ë¥ ', style: TextStyle(fontSize: 16)),
                         Text(
                           '${isPositive ? '+' : ''}${_formatRate(asset.changeRate)}%',
                           style: TextStyle(
                             fontSize: 20,
                             fontWeight: FontWeight.bold,
                             color: changeColor,
                           ),
                         ),
                       ],
                     ),
                     const SizedBox(height: 16),
                     Row(
                       mainAxisAlignment: MainAxisAlignment.spaceBetween,
                       children: [
                         const Text('ë³€ë™ê¸ˆì•¡', style: TextStyle(fontSize: 16)),
                         Text(
                           '${isPositive ? '+' : ''}${_formatPrice(asset.changeAmount, asset.currency)}',
                           style: TextStyle(
                             fontSize: 18,
                             fontWeight: FontWeight.bold,
                             color: changeColor,
                           ),
                         ),
                       ],
                     ),
                     if (asset.marketCap != null) ...[
                       const SizedBox(height: 16),
                       Row(
                         mainAxisAlignment: MainAxisAlignment.spaceBetween,
                         children: [
                           const Text('ì‹œê°€ì´ì•¡', style: TextStyle(fontSize: 16)),
                           Text(
                             _formatPrice(asset.marketCap, asset.currency),
                             style: const TextStyle(fontSize: 18),
                           ),
                         ],
                       ),
                     ],
                   ],
                 ),
               ),
             ),
          ],
         ),
       );
     }

     String _formatPrice(double? price, String? currency) {
       if (price == null) return '-';
       final formatter = NumberFormat.currency(symbol: currency ?? '\$', decimalDigits: 2);
       return formatter.format(price);
     }

     String _formatRate(double? rate) {
       if (rate == null) return '0.00';
       return rate.toStringAsFixed(2);
     }
   }
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] Asset ëª¨ë¸ ìƒì„± ë° ì½”ë“œ ì œë„ˆë ˆì´ì…˜
- [ ] AssetRepository êµ¬í˜„ (pagination í¬í•¨)
- [ ] AssetProvider êµ¬í˜„ (infinite scroll ì§€ì›)
- [ ] AssetListScreen êµ¬í˜„ (Placeholder êµì²´)
- [ ] AssetCard ìœ„ì ¯ êµ¬í˜„
- [ ] AssetDetailScreen êµ¬í˜„ (Placeholder êµì²´)
- [ ] Pull-to-refresh ë™ì‘ í™•ì¸
- [ ] Infinite scroll ë™ì‘ í™•ì¸


4.7 Phase 7: ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
===========================

ì˜ˆìƒ ì‹œê°„: 2-3ì‹œê°„

7.1. SearchRepository (lib/features/search/data/repositories/search_repository.dart)
   ```dart
   import 'package:dio/dio.dart';
   import '../../../../core/constants/api_constants.dart';
   import '../../../assets/data/models/asset.dart';

   class SearchRepository {
     final Dio _dio;

     SearchRepository(this._dio);

     /// Backend search endpoints:
     /// - GET /stocks/kr/search?q={query}
     /// - GET /stocks/us/search?q={query}
     /// - GET /crypto/search?q={query}
     ///
     /// Response format: Raw List [{asset}, {asset}, ...]
     /// (Not paginated for search - returns all matches)
     ///
     /// âš ï¸ If your backend returns {"results": [...]}, modify parsing below
     Future<List<Asset>> searchAssets(String query, String assetType) async {
       final endpoint = assetType == 'KR'
           ? '${ApiConstants.stocksKr}/search'
           : assetType == 'US'
               ? '${ApiConstants.stocksUs}/search'
               : '${ApiConstants.crypto}/search';

       final response = await _dio.get(
         endpoint,
         queryParameters: {'q': query},
       );

       // Handle both List and paginated response formats
       final List<dynamic> results;
       if (response.data is List) {
         // Direct list response: [{}, {}, ...]
         results = response.data;
       } else if (response.data is Map && response.data.containsKey('results')) {
         // Paginated response: {"count": 10, "results": [...]}
         results = response.data['results'];
       } else {
         throw Exception('Unexpected search response format: ${response.data.runtimeType}');
       }

       return results.map((json) => Asset.fromJson(json as Map<String, dynamic>)).toList();
     }
   }
   ```

7.2. SearchProvider (lib/features/search/presentation/providers/search_provider.dart)
   ```dart
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import '../../../../core/providers/core_providers.dart';
   import '../../data/repositories/search_repository.dart';
   import '../../../assets/data/models/asset.dart';
   import 'dart:async';

   // Repository Provider
   final searchRepositoryProvider = Provider<SearchRepository>((ref) {
     final dio = ref.watch(dioProvider);
     return SearchRepository(dio);
   });

   // Search State
   class SearchState {
     final List<Asset> results;
     final bool isLoading;
     final String? error;
     final String query;

     SearchState({
       this.results = const [],
       this.isLoading = false,
       this.error,
       this.query = '',
     });

     SearchState copyWith({
       List<Asset>? results,
       bool? isLoading,
       String? error,
       String? query,
     }) {
       return SearchState(
         results: results ?? this.results,
         isLoading: isLoading ?? this.isLoading,
         error: error,
         query: query ?? this.query,
       );
     }
   }

   // Search Notifier with Debounce
   class SearchNotifier extends StateNotifier<SearchState> {
     final SearchRepository _repository;
     Timer? _debounce;

     SearchNotifier(this._repository) : super(SearchState());

     void search(String query, String assetType) {
       if (_debounce?.isActive ?? false) _debounce!.cancel();

       state = state.copyWith(query: query);

       if (query.isEmpty) {
         state = state.copyWith(results: [], isLoading: false);
         return;
       }

       state = state.copyWith(isLoading: true, error: null);

       _debounce = Timer(const Duration(milliseconds: 500), () async {
         try {
           final results = await _repository.searchAssets(query, assetType);
           state = state.copyWith(
             results: results,
             isLoading: false,
           );
         } catch (e) {
           state = state.copyWith(
             isLoading: false,
             error: e.toString(),
           );
         }
       });
     }

     @override
     void dispose() {
       _debounce?.cancel();
       super.dispose();
     }
   }

   // Search Provider
   final searchProvider = StateNotifierProvider<SearchNotifier, SearchState>((ref) {
     final repository = ref.watch(searchRepositoryProvider);
     return SearchNotifier(repository);
   });
   ```

7.3. SearchScreen (lib/features/search/presentation/screens/search_screen.dart) - Placeholder êµì²´
   ```dart
   import 'package:flutter/material.dart';
   import 'package:flutter_riverpod/flutter_riverpod.dart';
   import 'package:go_router/go_router.dart';
   import '../providers/search_provider.dart';
   import '../../../assets/presentation/widgets/asset_card.dart';

   class SearchScreen extends ConsumerStatefulWidget {
     const SearchScreen({Key? key}) : super(key: key);

     @override
     ConsumerState<SearchScreen> createState() => _SearchScreenState();
   }

   class _SearchScreenState extends ConsumerState<SearchScreen>
       with SingleTickerProviderStateMixin {
     final TextEditingController _searchController = TextEditingController();
     late TabController _tabController;

     @override
     void initState() {
       super.initState();
       _tabController = TabController(length: 3, vsync: this);
       _tabController.addListener(_onTabChanged);
     }

     void _onTabChanged() {
       if (_searchController.text.isNotEmpty) {
         _performSearch();
       }
     }

     void _performSearch() {
       final assetType = _tabController.index == 0
           ? 'KR'
           : _tabController.index == 1
               ? 'US'
               : 'CRYPTO';
       ref.read(searchProvider.notifier).search(_searchController.text, assetType);
     }

     @override
     Widget build(BuildContext context) {
       final searchState = ref.watch(searchProvider);

       return Scaffold(
         appBar: AppBar(
           title: TextField(
             controller: _searchController,
             autofocus: true,
             decoration: const InputDecoration(
               hintText: 'ìì‚° ê²€ìƒ‰...',
               border: InputBorder.none,
             ),
             onChanged: (value) => _performSearch(),
           ),
           bottom: TabBar(
             controller: _tabController,
             tabs: const [
               Tab(text: 'í•œêµ­'),
               Tab(text: 'ë¯¸êµ­'),
               Tab(text: 'ì•”í˜¸í™”í'),
             ],
           ),
         ),
         body: _buildSearchResults(searchState),
       );
     }

     Widget _buildSearchResults(SearchState state) {
       if (state.query.isEmpty) {
         return const Center(
           child: Text('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”'),
         );
       }

       if (state.isLoading) {
         return const Center(child: CircularProgressIndicator());
       }

       if (state.error != null) {
         return Center(child: Text('Error: ${state.error}'));
       }

       if (state.results.isEmpty) {
         return const Center(child: Text('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤'));
       }

       return ListView.builder(
         itemCount: state.results.length,
         itemBuilder: (context, index) {
           final asset = state.results[index];
           return AssetCard(
             asset: asset,
             onTap: () {
               context.push('/assets/${asset.assetType}/${asset.id}');
             },
           );
         },
       );
     }

     @override
     void dispose() {
       _searchController.dispose();
       _tabController.dispose();
       super.dispose();
     }
   }
   ```

ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] SearchRepository êµ¬í˜„
- [ ] SearchProvider êµ¬í˜„ (500ms debounce í¬í•¨)
- [ ] SearchScreen êµ¬í˜„ (Placeholder êµì²´)
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥ ë™ì‘ í™•ì¸
- [ ] Debounce ë™ì‘ í™•ì¸


4.8 Phase 8: í…ŒìŠ¤íŠ¸ ì‘ì„±
========================

ì˜ˆìƒ ì‹œê°„: 3-4ì‹œê°„

8.1. Unit Test
8.2. Widget Test
8.3. Manual Test

Manual Test Checklist:
- [ ] ë¡œê·¸ì¸ ì„±ê³µ (testuser / testpass123)
- [ ] ë¡œê·¸ì¸ ì‹¤íŒ¨ (ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€)
- [ ] ìë™ ë¡œê·¸ì¸ (ì•± ì¬ì‹œì‘ ì‹œ ì„¸ì…˜ ìœ ì§€)
- [ ] í† í° ë§Œë£Œ ì‹œ ìë™ ê°±ì‹ 
- [ ] ìì‚° ëª©ë¡ ì¡°íšŒ (í•œêµ­/ë¯¸êµ­/ì•”í˜¸í™”í íƒ­ ì „í™˜)
- [ ] ìì‚° ê²€ìƒ‰
- [ ] ìì‚° ìƒì„¸ ë³´ê¸°
- [ ] ë¡œê·¸ì•„ì›ƒ
- [ ] ë„¤íŠ¸ì›Œí¬ ì—†ì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€

================================================================================
5. API ì—°ë™ ëª…ì„¸
================================================================================

5.1 Base URL
------------
ê°œë°œ: http://localhost:8001/api/v1
í”„ë¡œë•ì…˜: https://api.assetfolio.com/api/v1 (ë°°í¬ ì‹œ ì„¤ì •)

5.2 ì¸ì¦ ì—”ë“œí¬ì¸íŠ¸
------------------
POST /auth/token         - ë¡œê·¸ì¸ (OAuth 2.0 password grant)
POST /auth/register      - íšŒì›ê°€ì…
GET /auth/userinfo       - ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (OIDC)
POST /auth/logout        - ë¡œê·¸ì•„ì›ƒ
POST /auth/revoke        - í† í° ë¬´íš¨í™”

5.3 ìì‚° ì—”ë“œí¬ì¸íŠ¸
------------------
GET /stocks/kr           - í•œêµ­ ì£¼ì‹ ëª©ë¡ (pagination)
GET /stocks/us           - ë¯¸êµ­ ì£¼ì‹ ëª©ë¡ (pagination)
GET /crypto              - ì•”í˜¸í™”í ëª©ë¡ (pagination)
GET /stocks/kr/:id       - ì£¼ì‹ ìƒì„¸
GET /stocks/us/:id       - ë¯¸êµ­ ì£¼ì‹ ìƒì„¸
GET /crypto/:id          - ì•”í˜¸í™”í ìƒì„¸

ê²€ìƒ‰ ì—”ë“œí¬ì¸íŠ¸:
GET /stocks/kr/search?q={query}    - í•œêµ­ ì£¼ì‹ ê²€ìƒ‰
GET /stocks/us/search?q={query}    - ë¯¸êµ­ ì£¼ì‹ ê²€ìƒ‰
GET /crypto/search?q={query}       - ì•”í˜¸í™”í ê²€ìƒ‰

âš ï¸ IMPORTANT: êµ¬í˜„ ì „ì— http://localhost:8001/api/docs ì—ì„œ ì‹¤ì œ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸!
   íŠ¹íˆ search ì—”ë“œí¬ì¸íŠ¸ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ë°˜ë“œì‹œ í™•ì¸í•˜ì„¸ìš”.

ì°¸ê³ : ë°±ì—”ë“œ API ë¬¸ì„œëŠ” http://localhost:8001/api/docs ì—ì„œ í™•ì¸

================================================================================
6. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
================================================================================

6.1 í† í° ì €ì¥
-------------
- flutter_secure_storage ì‚¬ìš©
- iOS: Keychain (Info.plist ì„¤ì • ì™„ë£Œ)
- Android: EncryptedSharedPreferences (ìë™)
- âš ï¸ ì ˆëŒ€ SharedPreferences ì‚¬ìš© ê¸ˆì§€

6.2 ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
----------------
- ê°œë°œ: HTTP (localhost:8001)
- í”„ë¡œë•ì…˜: HTTPS í•„ìˆ˜
- Certificate Pinning (í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ ê³ ë ¤)

6.3 ë””ë²„ê·¸ ë¡œê·¸
--------------
- kDebugMode í”Œë˜ê·¸ë¡œ í”„ë¡œë•ì…˜ì—ì„œ ë¡œê·¸ ì œê±°
- ë¯¼ê° ì •ë³´ (í† í°, ë¹„ë°€ë²ˆí˜¸) ë¡œê·¸ ì¶œë ¥ ê¸ˆì§€

================================================================================
7. ë¹Œë“œ ë° ë°°í¬
================================================================================

7.1 iOS ë¹Œë“œ
------------
1. Xcode ì„¤ì •
   - Bundle ID: com.assetfolio.assetFolioMobile
   - Signing: Apple Developer ê³„ì • í•„ìš”

2. ë¹Œë“œ
   ```bash
   flutter build ios --release
   ```

3. ë°°í¬
   - TestFlight (ë² íƒ€)
   - App Store Connect

7.2 Android ë¹Œë“œ
---------------
1. í‚¤ ìƒì„±
   ```bash
   keytool -genkey -v -keystore ~/asset-folio-key.jks \
     -keyalg RSA -keysize 2048 -validity 10000 \
     -alias asset-folio
   ```

2. ë¹Œë“œ
   ```bash
   flutter build apk --release
   flutter build appbundle --release
   ```

3. ë°°í¬
   - Google Play Console (ë‚´ë¶€ í…ŒìŠ¤íŠ¸)
   - Google Play Store

================================================================================
8. êµ¬í˜„ ìˆœì„œ ë° ì¼ì •
================================================================================

ì´ ì˜ˆìƒ ê¸°ê°„: 7-8ì£¼ (ê°œì¸ í”„ë¡œì íŠ¸ ê¸°ì¤€, ì£¼ë‹¹ 10-15ì‹œê°„ ì‘ì—…, ADHD ê³ ë ¤ 50% ë²„í¼)

Week 1: í™˜ê²½ ì„¤ì • ë° Core ë ˆì´ì–´
- Day 1: Phase 0 (í™˜ê²½ ê²€ì¦)
- Day 2-3: Phase 1 (í”„ë¡œì íŠ¸ ì„¤ì •)
- Day 4-5: Phase 2 (Core ë ˆì´ì–´)

Week 2: ë°±ì—”ë“œ ì—°ë™ ë° ì¸ì¦
- Day 1: Phase 3 (ë°±ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸)
- Day 2-4: Phase 4 (ì¸ì¦ ê¸°ëŠ¥ - ëª¨ë¸, Repository)
- Day 5: Phase 4 (ì¸ì¦ ê¸°ëŠ¥ - Provider, UI)

Week 3: ì¸ì¦ ì™„ì„± ë° ë¼ìš°íŒ…
- Day 1-2: Phase 4 ì™„ì„± (LoginScreen, RegisterScreen)
- Day 3-4: Phase 5 (ë¼ìš°íŒ… ì„¤ì •)
- Day 5: í†µí•© í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •

Week 4-5: ìì‚° ëª©ë¡ ê¸°ëŠ¥
- Week 4: Phase 6 (Asset ëª¨ë¸, Repository, Provider)
- Week 5: Phase 6 (AssetListScreen, AssetDetailScreen, UI)

Week 6: ê²€ìƒ‰ ë° ë§ˆë¬´ë¦¬
- Day 1-2: Phase 7 (SearchScreen)
- Day 3-5: ë²„ê·¸ ìˆ˜ì •, UI ê°œì„ 

Week 7: í…ŒìŠ¤íŠ¸
- Day 1-3: Phase 8 (Unit, Widget, Integration Test)
- Day 4-5: Manual Testing, ìµœì¢… ë²„ê·¸ ìˆ˜ì •

Week 8: ë¹Œë“œ ë° ë² íƒ€ ë°°í¬
- Day 1-2: iOS ë¹Œë“œ ë° TestFlight
- Day 3-4: Android ë¹Œë“œ ë° Play Console
- Day 5: ë¬¸ì„œí™” (README, ì‚¬ìš©ì ê°€ì´ë“œ)

================================================================================
9. ì„±ê³µ ê¸°ì¤€
================================================================================

9.1 ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­
------------------
âœ… ì‚¬ìš©ì íšŒì›ê°€ì…/ë¡œê·¸ì¸ ê°€ëŠ¥
âœ… ìë™ ë¡œê·¸ì¸ (ì•± ì¬ì‹œì‘ ì‹œ)
âœ… ìì‚° ëª©ë¡ ì¡°íšŒ (í•œêµ­/ë¯¸êµ­/ì•”í˜¸í™”í)
âœ… ìì‚° ê²€ìƒ‰ ê¸°ëŠ¥
âœ… ìì‚° ìƒì„¸ ì •ë³´ ì¡°íšŒ
âœ… ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
âœ… í† í° ìë™ ê°±ì‹ 

9.2 ë¹„ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­
--------------------
âœ… 60 FPS ìœ ì§€ (Flutter DevToolsë¡œ ì¸¡ì •)
âœ… ì•± ì‹œì‘ ì‹œê°„ < 3ì´ˆ
âœ… API ì‘ë‹µ ëŒ€ê¸° ì‹œ ë¡œë”© í‘œì‹œ
âœ… ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€
âœ… iOS/Android ë™ì¼í•œ UX
âœ… ë‹¤í¬ëª¨ë“œ ì§€ì›

9.3 ì½”ë“œ í’ˆì§ˆ
------------
âœ… flutter analyze 0 issues
âœ… í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ > 60%
âœ… README.md ì‘ì„± ì™„ë£Œ

================================================================================
10. ë¦¬ìŠ¤í¬ ë° ëŒ€ì‘ ë°©ì•ˆ
================================================================================

ë¦¬ìŠ¤í¬ 1: OAuth 2.0 í† í° ê°±ì‹  ì‹¤íŒ¨
ëŒ€ì‘: Mutex íŒ¨í„´ìœ¼ë¡œ race condition ë°©ì§€, ìµœëŒ€ 3ë²ˆ ì¬ì‹œë„ í›„ ë¡œê·¸ì•„ì›ƒ

ë¦¬ìŠ¤í¬ 2: ë°±ì—”ë“œ API ìŠ¤í‚¤ë§ˆ ë³€ê²½
ëŒ€ì‘: Phase 3ì˜ ë°±ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ì¡°ê¸° ë°œê²¬, API ë²„ì „ ê´€ë¦¬

ë¦¬ìŠ¤í¬ 3: í”Œë«í¼ë³„ ë„¤ì´í‹°ë¸Œ ì´ìŠˆ
ëŒ€ì‘: iOS 13+, Android 8+ ì‹¤ì œ ë””ë°”ì´ìŠ¤ í…ŒìŠ¤íŠ¸

ë¦¬ìŠ¤í¬ 4: ì„±ëŠ¥ ì´ìŠˆ (ë¦¬ìŠ¤íŠ¸ ë Œë”ë§)
ëŒ€ì‘: ListView.builder, ì´ë¯¸ì§€ ìºì‹±, Flutter DevTools í”„ë¡œíŒŒì¼ë§

ë¦¬ìŠ¤í¬ 5: ProGuardë¡œ JSON íŒŒì‹± ì‹¤íŒ¨ (Android Release)
ëŒ€ì‘: proguard-rules.proì— @JsonSerializable ê·œì¹™ ì¶”ê°€

ë¦¬ìŠ¤í¬ 6: iOS Keychain ì ‘ê·¼ ì‹¤íŒ¨
ëŒ€ì‘: Info.plistì— KeychainAccessGroups ì¶”ê°€

ë¦¬ìŠ¤í¬ 7: ë„¤íŠ¸ì›Œí¬ ì—†ì„ ë•Œ ì•± ë©ˆì¶¤
ëŒ€ì‘: connectivity_plusë¡œ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì²´í¬, ì˜¤í”„ë¼ì¸ ë©”ì‹œì§€ í‘œì‹œ

================================================================================
11. ì°¸ê³  ìë£Œ
================================================================================

Flutter ê³µì‹ ë¬¸ì„œ:
- https://flutter.dev/docs
- https://pub.dev/packages/riverpod
- https://pub.dev/packages/dio
- https://pub.dev/packages/go_router

ë°±ì—”ë“œ ë¬¸ì„œ:
- README: /Users/indent/Desktop/Noah/repo/asset-backend/README.md
- API Docs: http://localhost:8001/api/docs

ì›¹ í”„ë¡ íŠ¸ì—”ë“œ ì°¸ê³ :
- /Users/indent/Desktop/Noah/repo/asset-frontend/src/

ì•„í‚¤í…ì²˜:
- Clean Architecture in Flutter
- Feature-First Architecture

================================================================================
12. ì¤‘ìš” ì²´í¬í¬ì¸íŠ¸
================================================================================

âš ï¸ Phase 0 ì™„ë£Œ ì „ì—ëŠ” ì ˆëŒ€ ì§„í–‰í•˜ì§€ ë§ˆì„¸ìš”!
âš ï¸ Phase 3 ë°±ì—”ë“œ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ë°˜ë“œì‹œ í†µê³¼í•´ì•¼ í•©ë‹ˆë‹¤!
âš ï¸ ì½”ë“œ ì œë„ˆë ˆì´ì…˜ì„ ìŠì§€ ë§ˆì„¸ìš”: build_runner build --delete-conflicting-outputs
âš ï¸ .env íŒŒì¼ì„ .gitignoreì— ì¶”ê°€í•˜ì„¸ìš”!

================================================================================
EOF
================================================================================
